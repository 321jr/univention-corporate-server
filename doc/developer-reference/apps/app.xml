<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE chapter [
	<!ENTITY % extensions SYSTEM "../../stylesheets/macros.ent" >
	<!ENTITY % DocBookDTD PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
	"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
	<!ENTITY % entities SYSTEM "../../stylesheets/macros-en.ent" >
	%extensions;
	%DocBookDTD;
	%entities;
]>
<chapter id="chap:app">
	<title>App Center
		<indexterm><primary>App center</primary></indexterm>
	</title>
	<para>
		The Univention App Center provides a platform for software vendors and an
		easy-to-use entry point for &ucsUCS; users to extend their environment with
		business software.
	</para>
	<para>
		Univention App Center is the simplest form to install applications on
		&ucsUCS;. In the &ucsUMC; it is the first entry point for their
		installation. Univention App Center is no app store in a classical point of
		view as known from iOS or Android and no license management for
		applications. The sale of licenses, maintenance or support for applications
		follows the default procedure of the respective vendor.
	</para>
	<para>
	  This chapter mainly aims at software vendors that want to provide their
	  software in Univention App Center and describes the necessary steps. An
	  overview of the advantages and benefits from a business perspective can
	  can be found in <xref linkend="appcenter-whitepaper"/>.
	</para>
	<para>
		A catalogue with the available applications can be viewed on the <ulink
			url="http://www.univention.de/en/products/ucs/app-catalogue-for-univention-corporate-server/">Univention
			website</ulink>.
	</para>
	<section id="app:requirements">
		<title>Requirements</title>
		<para>
			The requirements for providing a software solution in Univention App
			Center are:
			<itemizedlist>
				<listitem>
						Formally:
						<itemizedlist>
							<listitem><simpara>
									The certification of the software solution for UCS and sign the
									Univention Logoprogram <ulink
										url="http://wiki.univention.de/index.php?title=Certification_Certified_for_Univention_Corporate_Server">Certified
										for Univention Corporate Server</ulink>
							</simpara></listitem>
							<listitem><simpara>
									Sign the contract to use "Univention App Center" as platform to
									provide applications to users
							</simpara></listitem>
						</itemizedlist>
				</listitem>
				<listitem><simpara>
					Technically: The packaging of the software solution in the Debian
					package format (see <xref linkend="app:package" />), provided for the
					architectures i386 and/or amd64
				</simpara></listitem>
				<listitem><simpara>
					Out-of-the-Box functionality: The app has to work already after
					installation
				</simpara></listitem>
			</itemizedlist>
		</para>
		<para>
			The following items are <emphasis>no</emphasis> disqualifying criteria:
			<itemizedlist>
				<listitem><simpara>
					Missing documentation
				</simpara></listitem>
				<listitem><simpara>
					No or little integration of the app with Univention Corporate Server
				</simpara></listitem>
				<listitem><simpara>
					Poor usability
				</simpara></listitem>
			</itemizedlist>
		</para>
		<para>
			The following items are important for packaging:
			<itemizedlist>
				<listitem><simpara>
					The application has to be installed without any user interaction
					(unattended). The installation process is not allowed to be
					interrupted or cancelled which would result in an inconsistent state
					of the package management.
				</simpara></listitem>
				<listitem><simpara>
					The application has to be installed and uninstalled cleanly.
					"Uninstalled cleanly" especially aims for removing Extended
					Attributes the application created during installation. See <xref
						linkend="join:unjoin"/>.
				</simpara></listitem>
				<listitem><simpara>
					The application does not (neither after installation nor after
					uninstallation) break &ucsUCS; functionality.
				</simpara></listitem>
				<listitem><simpara>
					Recommended: The application is integrated in UCS and the UCS
					management system (see <xref linkend="app:integration"/>). 
				</simpara></listitem>
			</itemizedlist>
		</para>
		<note>
			<para>
				The software vendor is responsible for the maintenance of his
				application(s). Package updates are provided for Univention App Center
				in a contemporary way (see also <xref linkend="app:update" />). 
			</para>
		</note>
	</section>
	<section id="app:package">
		<title>Packaging for the App Center</title>
		<para>
			The App Center is based on the Debian package system.  From a technical
			point of view, the installation of an application via the App Center
			consists roughly of two steps: (1) adding a new repository to the system
			which resides on the App Center server and (2) <command>apt-get</command>
			which installs the required package. This means that 3rd party vendors
			need to package their application as a <literal>.deb</literal> file and
			send that to Univention.
		</para>
		<para>
			For deeper integration in &ucsUCS; it is necessary to add at least one more
			file, a Join Script (see <xref linkend="app:integration-by-vendor" />).
			This file can be included in the core package of the application or in a
			dedicated package for &ucsUCS; integration, say,
			<package>univention-<replaceable>appname</replaceable></package> and have
			a dependency on the core application (on <literal>dpkg</literal> level).
		</para>
		<para>
			See <xref linkend="chap:debian"/> for further details on how to build
			Debian packages.
		</para>
		<para>
			In most cases the core application depends on several other packages,
			e.g. <package>apache</package>, <package>python</package>, etc. Those
			packages are automatically installed by the App Center (via
			<literal>apt</literal>). All packages (except games) from Debian were
			rebuilt for &ucsUCS;, but not all packages are maintained by Univention.
			The maintained repository for &ucsUCS; contains the most common packages,
			but it may be that the application needs some specific packages not found
			there. If this packages exists for Debian, it can be found in the
			unmaintained repository. But as the unmaintained repository is not
			activated by default the App Center cannot install the application
			without user configuration if some packages are only available through
			the unmaintained repository. But this is a requirement for any
			application! To workaround this issue, the vendor has to do the
			following: In a first step he has to grab the packages from the
			unmaintained repository (see for example <ulink
				url="http://apt.software-univention.de/4.0/unmaintained/" />) and
			bundle it with his own packages so that they are put into the app's own
			repository. In a second step he should inform Univention about these
			packages. We will probably move them into maintained so that this
			procedure will become obsolete in future versions of the application.
		</para>
	</section>
	<section id="app:nextsteps">
		<title>Next steps</title>
		<para>
			As soon as the software complies to the requirements the following steps
			are to be taken:
			<itemizedlist>
				<listitem><simpara>
					Collect the meta data for the software for the App Center (see
					<xref linkend="app:iniFile" /> and <xref linkend="app:optionalFiles"
						/>).
				</simpara></listitem>
				<listitem><simpara>
					Upload the packages along with the ini file, some README files, an
					icon and (maybe) a screenshot in a file archive (everything should
					go in one "directory"). See <xref linkend="app:upload" />.
				</simpara></listitem>
				<listitem>
					<para>
					Test the software solution with Univention Test App Center
					(more information is given by Univention after the upload).
					</para>
					<important>
						<para>
							Univention will not test if the application works as expected. We
							have a test suite that is run before we publish the application
							but it only covers base functionality of &ucsUCS; itself (e.g.
							LDAP, Join, etc.)
						</para>
					</important>
				</listitem>
				<listitem><simpara>
					Give approval for provisioning in the productive Univention App
					Center towards Univention.
				</simpara></listitem>
				<listitem><simpara>
					Show with the badge "Available in Univention App Center" that the App
					is ready to use. The HTML snippet will be provided by Univention.
				</simpara></listitem>
			</itemizedlist>
		</para>
		<para>
			See also <xref linkend="app:update" /> for how to proceed if an update is
			to be released.
		</para>
	</section>
	<section id="app:iniFile">
		<title>Application meta file</title>
		<para>
			The App Center needs some meta information about the application to
			handle the installation and to present information to the user. The
			application needs a so-called <literal>.ini</literal> file for that. The
			particulars in the meta data have to be in English at least.
		</para>
		<para>
			An example along with some comments on the variables is attached:
		</para>
		<programlisting language="ini"><xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="application.ini" parse="text"/></programlisting>
		<para>
			This file needs to be shipped with the application and should be updated
			with each new version of the application at least changing
			<literal>Version</literal>.
		</para>
		<para>
			Besides the text file and the above mentioned statements, a product logo and a screenshot, if given, are needed:
			<itemizedlist>
				<listitem><simpara>
					Product logo in PNG format, size: 50x50 pixels, with transparent
					background. Required.
				</simpara></listitem>
				<listitem><simpara>
					Screenshot of the application. Format can be JPG or (preferably) PNG.
					Optional.
				</simpara></listitem>
			</itemizedlist>
		</para>
		<para>
			A few variables of the ini file need further explanation:
			<variablelist>
				<varlistentry>
					<term>ID</term>
					<listitem>
						<simpara>
							Needs to stay the same all the time. It is used to connect
							different versions.
						</simpara>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>Categories</term>
					<listitem>
						<para>
							Comma separated list of categories. In order to keep the overall
							list clean and simple an application should use categories from
							this list:
							<itemizedlist>
								<listitem><simpara>
									Administration
								</simpara></listitem>
								<listitem><simpara>
									Business
								</simpara></listitem>
								<listitem><simpara>
								  Collaboration
								</simpara></listitem>
								<listitem><simpara>
								  Education
								</simpara></listitem>
								<listitem><simpara>
								  System services
								</simpara></listitem>
								<listitem><simpara>
								  UCS components
								</simpara></listitem>
								<listitem><simpara>
								  Virtualization
								</simpara></listitem>
							</itemizedlist>
						</para>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>Version</term>
					<listitem>
						<simpara>
							Has to rise every time. Needs to be comparable, i.e. versions
							consisting only of a codename are not useful. In the App Center,
							only the newest version (or the currently installed one) is shown.
							It is possible to install one specific version but this needs
							knowledge of internal IDs (beyond control even for the application
							vendor).
						</simpara>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>LongDescription</term>
					<listitem>
						<simpara>
							A (more exhaustive) description that will be displayed when
							viewing the details of the application. Since UCS 3.2 this
							description needs to be in HTML (this also means that characters
							like "&amp;" need to be escaped to "&amp;amp;"). Other variables
							are escaped automatically if not stated otherwise (meaning that
							"&amp;" may be used).
						</simpara>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>MinPhysicalRAM</term>
					<listitem>
						<simpara>
							The minimal amount of free memory in MB when trying to install the
							application. The application should work fluently above that limit
							at least for smaller environments.
						</simpara>
						<simpara>
							In UCS 3.1 an installation was prevented when this test failed. If
							this limit is set very high many testers will be unable to install
							this application for UCS 3.1 as there is no easy way to skip this
							test. Since UCS 3.2 this test only shows a warning that can be
							overridden by the user.
						</simpara>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>RequiredApps</term>
					<listitem>
						<simpara>
							Application IDs for apps that need to be installed in order to run
							this one correctly. These applications will not be installed
							automatically. New in UCS 3.2.
						</simpara>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>ConflictedSystemPackages</term>
					<listitem>
						<simpara>
							Package names that may not be installed along with the application.
							It is highly recommended that this list is reflected on
							<literal>dpkg</literal> level in some other package of the
							application. This list is just to show the user conflicts
							<emphasis>before</emphasis> the application is to be installed.
							Conflicts on package level are resolved automatically and the user
							has to confirm if some packages will be uninstalled. Same for
							<literal>ConflictedApps</literal>.
						</simpara>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>DefaultPackages</term>
					<listitem>
						<simpara>
							A list of packages that will be installed. It is recommended to
							keep this list as small as possible and install other packages as
							dependencies as this is less error prone. Preferably only one
							package like
							<package>univention-<replaceable>appname</replaceable></package> is
							given here.
						</simpara>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>DefaultPackagesMaster</term>
					<listitem>
						<simpara>
							Installing an application may require an extension of the LDAP
							schema. This is done by providing a separate package for this
							schema file and install it on the &ucsMaster; (and all &ucsBackup;
							servers). The App Center will install these packages automatically
							throughout the domain — in opposite to the
							<literal>DefaultPackages</literal> which are only installed
							locally. Another difference is that these packages will not be
							uninstalled even when the whole application is removed because a
							schema that was used before it is removed again will break the
							whole LDAP server.
						</simpara>
						<simpara>
							Since UCS 3.2 it is possible (and preferable) to register schema
							extensions via the Join Script (see <xref
								linkend="app:ucs_registerLDAPExtension" />). In most cases this
							makes <literal>DefaultPackagesMaster</literal> unnecessary.
						</simpara>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>Screenshot</term>
					<listitem>
						<simpara>
							In contrast to the product logo, the screenshot has to be given
							explicitly in the ini file. That is the filename (with file
							extension, without any webserver or directory).
						</simpara>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>NotifyVendor</term>
					<listitem>
						<simpara>
							See <xref linkend="app:notification" /> for further explanation.
							Has to be set to <literal>True</literal> to be activated.
						</simpara>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>UseShop</term>
					<listitem>
						<simpara>
							New in UCS 3.2: Boolean value whether a link shall be displayed
							leading directly to some kind of shop. If
							<literal>ShopURL</literal> is not given
							<literal>https://shop.univention.com</literal> is used by
							default.
						</simpara>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>SupportURL</term>
					<listitem>
						<simpara>
							New in UCS 3.2: Points to a website where the user can get/buy
							support for the app. If not set, the user will instead be
							encouraged to contact the app vendor
							(<literal>Contact</literal>). If set to <envar>None</envar>,
							the user will see something like "No support option provided".
						</simpara>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>ShopURL</term>
					<listitem>
						<simpara>
							New in UCS 3.2: Only makes sense in combination with
							<literal>UseShop=True</literal>. The following parameters are
							sent to this URL via GET:
						</simpara>
						<itemizedlist>
							<listitem><simpara>
									key_id (Key ID of the License)
							</simpara></listitem>
							<listitem><simpara>
									ucs_version (major and minor version of UCS, e.g. 4.0)
							</simpara></listitem>
							<listitem><simpara>
									app_id (internal ID of the Application)
							</simpara></listitem>
							<listitem><simpara>
									app_version (current version of the Application)
							</simpara></listitem>
							<listitem><simpara>
									locale (locale used in the frontend, e.g. de)
							</simpara></listitem>
						</itemizedlist>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>WebInterface</term>
					<listitem>
						<simpara>
							If a web frontend is installed by the application, one may state
							this here. Should probably start with a "/".
						</simpara>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>UCSOverviewCategory</term>
					<listitem>
						<simpara>
							New in UCS 3.2: If there is a <literal>WebInterface</literal> the
							App Center automatically registers a link in the overview page of
							the UCS server. By default these are added in the
							<envar>services</envar> section of the overview page. If
							<literal>UCSOverviewCategory</literal> is set to
							<envar>admin</envar> the link will be generated there. Can be
							disabled completely if set to <envar>False</envar>. See also
							<xref linkend="app:integration-by-app-center" />.
						</simpara>
					</listitem>
				</varlistentry>
				<varlistentry>
					<term>ServerRole</term>
					<listitem>
						<simpara>
							Roles that may use this application, separate by comma. Possible
							roles are <envar>domaincontroller_master</envar>,
							<envar>domaincontroller_backup</envar>,
							<envar>domaincontroller_slave</envar>, and
							<envar>memberserver</envar>. In UCS 3.1 these applications were
							visible but not installable (an error message was shown). Since UCS
							3.2 they are completely hidden. This means that
							<literal>ServerRole</literal> must not change throughout the
							lifetime of an application (at least not more restrictive).
						</simpara>
					</listitem>
				</varlistentry>
			</variablelist>
		</para>
	</section>
	<section id="app:optionalFiles">
		<title>Optional application files</title>
		<para>
			Along with the <literal>.ini</literal> file, there are more files that
			can be shipped along with the Application, each of them optionally (at
			least in English if given):
		</para>
		<variablelist>
			<varlistentry>
				<term>LICENSE_AGREEMENT</term>
				<listitem>
					<simpara>
						A file the user has to accept before the installation starts. As of
						UCS 3.2 HTML in this file is allowed and it may be localised by
						using the files <literal>LICENSE_AGREEMENT_EN</literal> resp.
						<literal>LICENSE_AGREEMENT_DE</literal>.
					</simpara>
					<important>
						<para>
							As stated above HTML in this file is now allowed (and enforced).
							It was not in UCS 3.1 but received some simple auto formatting.
							You may have to convert an existing
							<literal>LICENSE_AGREEMENT</literal>.
						</para>
					</important>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>README_INSTALL</term>
				<listitem>
					<simpara>
						A file that is presented to the user before installation (but after
						<literal>LICENSE_AGREEMENT</literal>). HTML is allowed. It may be
						localised by using the files <literal>README_INSTALL_EN</literal>
						resp. <literal>README_INSTALL_DE</literal>.
					</simpara>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>README_POST_INSTALL</term>
				<listitem>
					<simpara>
						A file that is presented to the user after installation. HTML is
						allowed. It may be localised by using the files
						<literal>README_POST_INSTALL_EN</literal> resp.
						<literal>README_POST_INSTALL_DE</literal>.
					</simpara>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>README_UPDATE</term>
				<listitem>
					<simpara>
						A file that is presented to the user before upgrading, listing
						changes. Note that a user may only upgrade to the newest version
						and does so in one step. Only the latest
						<literal>README_UPDATE</literal> is shown.
						As of UCS 3.2 it may be localised by using the files
						<literal>README_UPDATE_EN</literal> resp.
						<literal>README_UPDATE_DE</literal>.
					</simpara>
					<important>
						<para>
							As stated above HTML in this file is now allowed (and enforced).
							It was not in UCS 3.1 but received some simple auto formatting.
							You may have to convert an existing
							<literal>README_UPDATE</literal>.
						</para>
					</important>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>README_POST_UPDATE</term>
				<listitem>
					<simpara>
						A file that is presented to the user after upgrading. Note that a
						user may only upgrade to the newest version and does so in one
						step. Only the latest <literal>README_POST_UPDATE</literal> is
						shown. HTML is allowed. It may be localised by using the files
						<literal>README_POST_UPDATE_EN</literal> resp.
						<literal>README_POST_UPDATE_DE</literal>.
					</simpara>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>README</term>
				<listitem>
					<simpara>
						A README file that the user may see in a dedicated &ucsUMC; module
						for the installed application. Should contain something like first
						steps with the installed application and explain what can be done
						with it and how. HTML is allowed. It may be localised by using the
						files <literal>README_EN</literal> resp
						<literal>README_DE</literal>.
					</simpara>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>README_UNINSTALL</term>
				<listitem>
					<simpara>
						A file that is presented to the user before uninstallation. HTML is
						allowed. It may be localised by using the files
						<literal>README_UNINSTALL_EN</literal> resp.
						<literal>README_UNINSTALL_DE</literal>.
					</simpara>
				</listitem>
			</varlistentry>
			<varlistentry>
				<term>README_POST_UNINSTALL</term>
				<listitem>
					<simpara>
						A file that is presented to the user after uninstallation. HTML is
						allowed. It may be localised by using the files
						<literal>README_POST_UNINSTALL_EN</literal> resp.
						<literal>README_POST_UNINSTALL_DE</literal>.
					</simpara>
				</listitem>
			</varlistentry>
		</variablelist>
	</section>
	<section id="app:upload">
		<title>Uploading the application</title>
		<para>
			If the meta data (text file, logo and screenshot) and the packages are
			ready for upload, they can be put into a file archive (<filename class="extension">.zip</filename> or
			(preferably) <filename class="extension">.tar.gz</filename>) and uploaded to <ulink
				url="http://upload.univention.de">http://upload.univention.de</ulink>.
			If the archive is larger than 150 MB it has to be split into single parts
			not larger than 150 MB.
		</para>
		<para>
			A unique upload ID will be displayed after the download that has to be
			forwarded to Univention. Please send the following information via e-mail
			to <ulink url="mailto:appcenter@univention.de"><email>appcenter@univention.de</email></ulink>:
			<itemizedlist>
				<listitem><simpara>
					Upload ID for the file archive. Please provide all upload IDs if the
					archive had to be splitted.
				</simpara></listitem>
				<listitem><simpara>
					Grant permission to Univention to distribute the software through
					Univention App Center.
				</simpara></listitem>
			</itemizedlist>
		</para>
		<para>
			All further communication will be done through the ticket system after
			the upload. 
		</para>
	</section>
	<section id="app:notification">
		<title>Notifications</title>
		<para>
			Univention always receives an estranged notification for statistical
			purposes upon installation and uninstallation of an application in
			Univention App Center that is only saved at Univention for data
			processing and will not be forwarded to any third party.
		</para>
		<para>
			Depending on the guideline of the respective application vendor an
			updated UCS license key with so-called key identification (Key ID) is
			required for the installation of an application. In this case, the Key ID
			will be sent to Univention together with the notification. As a result
			the application vendor regularly receives a message from Univention with
			the following information:
			<itemizedlist>
				<listitem><simpara>
					Name of the installed application
				</simpara></listitem>
				<listitem><simpara>
					Registered email address
				</simpara></listitem>
			</itemizedlist>
		</para>
		<para>
			The description of every application includes a respective indication for
			such cases and is shown before installation.
		</para>
		<para>
			If a UCS environment does not have such a key at its disposal (e.g. UCS
			Core Edition) and the vendor requires a Key ID, the user
			will be asked to request an updated license key directly from Univention.
			Afterwards the new key can be applied and the application installed.
		</para>
	</section>
	<section id="app:update">
		<title>Updates for the application</title>
		<para>
			If an update for an application is available, the software vendor has to
			provide the recent packages to Univention. The updated packages go in
			general through the same procedure as with the initial process described
			in <xref linkend="app:nextsteps" />.
		</para>
		<para>
			This holds for minor updates (i.e. just small bug fixes) as well as major
			updates (added functionality, overhauled interface, etc.). The vendor is
			responsible for a smooth transition from one version to another.
			<important>
				<para>
					The App Center always installs the newest version, i.e. we do not
					incrementally upgrade an application. So each newer version needs to
					make sure that the update from <emphasis>any</emphasis> older version
					works.
				</para>
			</important>
		</para>
		<para>
			For the App Center, there is no difference between a minor and a major
			update. The old version is completely replaced by the newer one. We do
			not natively support two (more or less independent) "versions lines" of
			the same application (e.g. one for those who want the newest features and
			one for those who wish to have a stable platform with nothing but
			conservative bug fixes). If this is desired, two separate applications
			need to be uploaded to the App Center that will show up next to each
			other. In this case the <literal>ID</literal> in the ini file needs to be
			changed and the application somehow needs to make sure that they cannot
			both be installed in parallel (e.g. a version dependency on
			<literal>dpkg</literal> level of some meta package). Univention may help
			you with the details.
		</para>
		<para>
			Updates for the application description (.ini file), the product logo,
			the screenshot, readme files (especially
			<literal>README_UPDATE</literal>) and the packages are all submitted to
			<ulink url="mailto:appcenter@univention.de"><email>appcenter@univention.de</email></ulink>.
			Only those files that changed need to be uploaded again, everything else
			can be copied by Univention. The ini file needs to change every time,
			because the <literal>Version</literal> has to be increased. If this is
			the only change in the ini file, this may be stated in the email instead
			of shipping the file and we will take care of that during copying. Please
			use the upload if a higher amount of data has to be transferred (see <xref
				linkend="app:upload" />).
		</para>
		<para>
			As the application has already gone through the initial approval process
			and passed, Univention will offer to "semi-automatically" publish the
			application. I.e. we will run our test suite while giving you the chance
			to test your application. If our tests go well and we do not hear
			anything contrary from you, we will publish the application by then.
		</para>
	</section>
	<section id="app:integration">
		<title>Integrating the Application in UCS</title>
	  <section id="app:integration-by-app-center">
		  <title>Automatic integration done by the App Center</title>
			<para>
				Some tasks can be done automatically by the App Center and do not need
				any (or much) help from the vendor.
			</para>
			<para>
				New in UCS 3.2: The overview of any UCS system (i.e. plain
				https://<replaceable>IP</replaceable>/) can link to various web
				frontends, e.g. the &ucsUMC;. If the application provides a
				<literal>WebInterface</literal> in the ini file, a link is built
				automatically, with the ini's <literal>Name</literal> and
				<literal>Description</literal> as text.
			</para>
			<para>
				This feature can be disabled by stating
				<literal>UCSOverviewCategory=False</literal>. This may be a good idea
				if there are multiple web frontends and they should be maintained
				manually and in one place. In this case the following UCR variables
				should be set in <filename>postinst</filename> and removed in
				<filename>postrm</filename> (see also <xref linkend="www:overview" />):
				<variablelist>
					<varlistentry>
						<term>ucs/web/overview/entries/service/<replaceable>appid</replaceable>/icon</term>
						<listitem>
							<simpara>
								Path to the icon for the link.
							</simpara>
						</listitem>
					</varlistentry>
					<varlistentry>
						<term>ucs/web/overview/entries/service/<replaceable>appid</replaceable>/label</term>
						<listitem>
							<simpara>
								English version of the headline. German version is
								<literal>ucs/web/overview/entries/service/<replaceable>appid</replaceable>/label/de</literal>
							</simpara>
						</listitem>
					</varlistentry>
					<varlistentry>
						<term>ucs/web/overview/entries/service/<replaceable>appid</replaceable>/description</term>
						<listitem>
							<simpara>
								English version of the short text below the headline. German
								version is
								<literal>ucs/web/overview/entries/service/<replaceable>appid</replaceable>/description/de</literal>
							</simpara>
						</listitem>
					</varlistentry>
					<varlistentry>
						<term>ucs/web/overview/entries/service/<replaceable>appid</replaceable>/link</term>
						<listitem>
							<simpara>
								Link to the web interface. Probably something like
								<literal>/<replaceable>appid</replaceable></literal>.
							</simpara>
						</listitem>
					</varlistentry>
				</variablelist>
			</para>
			<para>
				New in UCS 3.2: Each application registers itself in the LDAP directory
				and sets the hosts on which it is installed automatically. These
				information can be accessed by any <literal>machine
					connection</literal>. The path is
				<literal>univentionAppID=<replaceable>appid</replaceable>_<replaceable>appversion</replaceable>,cn=<replaceable>appid</replaceable>,cn=apps,cn=univention,<replaceable>ldap_base</replaceable></literal>.
				See also <xref linkend="chap:udm" /> if this data shall be accessed.
			</para>
		</section>
	  <section id="app:integration-by-vendor">
		  <title>Scope of the vendor</title>
			<para>
				Reuse users, groups, computers already administered in domain.
				<!--
				See <xref linkend="udm:ldap:common-attributes"/>.
				-->
			</para>
			<para>
				An Application may need more attributes than there are present. For
				example something like <emphasis>This user is allowed to use the
					app</emphasis>. For this it needs to add Extended Attributes (see
				<xref linkend="udm:ea"/>) in a Join Script (see <xref
					linkend="chap:join"/>) in a package from
				<literal>DefaultPackages</literal>. It will also have to extend the
				LDAP schema. This can also be done in the Join Script (see <xref
					linkend="app:ucs_registerLDAPExtension" />) or, alternatively, in a
				package of <literal>DefaultPackagesMaster</literal>.
			</para>
			<para>
				If the application wants to sync certain attributes (for example
				passwords) there are listener modules. See <xref
					linkend="chap:listener"/>.
			</para>
		</section>
	</section>

	<section id="app:bestpractices">
		<title>Best practices</title>
		<!--para>
			TBD. Minimal example app. Examples. Important: #DEBHELPER#.
		</para-->
	  <section id="app:ucs_registerLDAPExtension">
		  <title>Registration of LDAP and UDM Extensions</title>
			<para>
				<acronym>LDAP</acronym> schema and ACL extensions as well as UDM syntax, UDM hook and UDM extension modules can be installed via the library function <literal>ucs_registerLDAPExtension</literal>, see <xref linkend="join:libraries:shell"/>.
			</para>
		</section>
	</section>

	<!--section id="app:testcenter">
		<title>Setup test app center</title>
		<para>
			TBD
		</para>
	</section-->

</chapter>
<!-- vim:set ts=2 sw=2 noet ft=docbk:-->
