<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
	"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
	<!ENTITY % extensions SYSTEM "../stylesheets/macros.ent" >
	<!ENTITY % entities SYSTEM "../stylesheets/macros-en.ent" >
	<!ENTITY bibliography SYSTEM "../stylesheets/bibliography-en.xml">
	%extensions;
	%entities;
]>
<book lang="en" id="releasenotes-3.2-7-en">
	<bookinfo>
		<title>UCS 3.2-7 Release Notes</title>
		<subtitle>Release notes for the installation and update of &ucsUCS; (UCS) 3.2-7</subtitle>

		<legalnotice lang="">
			<para>
				Alle Rechte vorbehalten. / All rights reserved.
			</para>

			<para>
				(c) 2002-2015 Univention GmbH
			</para>

			<para>
				Mary-Somerville-Straße 1, 28359 Bremen, Deutschland/Germany
			</para>

			<para>
				<email>feedback@univention.de</email>
			</para>

			<para lang="de">
				Jede aufgeführte Marke und jedes Warenzeichen steht im Eigentum ihrer jeweiligen eingetragenen Rechtsinhaber.
				Linux ist ein eingetragenes Warenzeichen von Linus Torvalds.
			</para>

			<para lang="en">
				The mentioned brand names and registered trademarks are owned by the respective legal owners in each case.
				Linux is a registered trademark of Linus Torvalds.
			</para>
		</legalnotice>
	</bookinfo>

	<chapter id="relnotes:highlights">
		<title>&ucsUCS; (UCS) 3.2-6</title>

		<para>
			The seventh point release for &ucsUCS; (UCS) is now available in the form of &ucsUCS; 3.2-7.
			The online repository provided by Univention can be used to update existing UCS systems or, alternatively, updates can be installed from an update DVD.
			UCS 3.2-7 includes all the errata updates published for UCS 3.2-6.
			An overview of the most important changes:
		</para>

		<itemizedlist>
			<listitem><para>
					The release contains several security updates which have been released in the previous weeks and months as errata updates for UCS 3.2-5.
					Among others, it contains updated packages for the <package>Linux kernel</package>, <package>OpenSSL</package>, <package>glibc</package>, <package>sudo</package>.
			</para></listitem>
			<listitem><para>
					Various tools using the PAM stack now support the configuration of multiple LDAP servers.
					Such a configuration can be used to improve the reliability of authentication services.
			</para></listitem>
			<listitem><para>
					The login performance in large environments has been improved:
					Time consuming queries for quota settings have been separated from the login process.
			</para></listitem>
			<listitem><para>
					Provided that UCS receives a network configuration via <systemitem class="service">DHCP</systemitem>, additional parameters like routing information are now also evaluated.
			</para></listitem>
		</itemizedlist>
	</chapter>

	<chapter id="relnotes:order">
		<title>Recommended update order for environments with more than one UCS server</title>

		<para>
			In environments with more than one UCS system, the update order of the UCS systems must be borne in mind:
		</para>

		<para>
			The authoritative version of the LDAP directory service is maintained on the &ucsMaster; and replicated on all the remaining LDAP servers of the UCS domain.
			As changes to the LDAP schemes can occur during release updates, the &ucsMaster; must always be the first system to be updated during a release update.
		</para>

		<para>
			It is generally advisable to update all UCS systems in one maintenance window whenever possible.
		</para>
	</chapter>

	<chapter id="relnotes:prepare">
		<title>Preparation of update</title>

		<para>
			It must be checked whether sufficient disk space is available.
			A standard installation requires a minimum of 6 GB of disk space.
			Depending on the scope of the existing installation, the update will require at least another 1 GB of disk space for the downloading and installation of the packages.
		</para>

		<para>
			For the update, a login should be performed on the system's local console as user <systemitem class="username">root</systemitem>, and the update should be initiated there.
			Alternatively, the update can be conducted using &ucsUMC;.
		</para>

		<para>
			Remote updating via SSH is not recommended as this may result in the update procedure being cancelled, e.g., if the network connection is interrupted.
			In consequence, this can affect the system severely.
			If updating should occur over a network connection nevertheless, it must be verified that the update continues despite disconnection from the network.
			This can be done, e.g., using the tools <command>screen</command> and <command>at</command>.  These tools are installed on all system roles by default.
		</para>
	</chapter>

	<chapter id="relnotes:post">
		<title>Postprocessing of the update</title>

		<para>
			Following the update, new or updated join scripts need to be executed.
			This can be done in two ways:
			Either using the UMC module  <guimenu>Domain join</guimenu> or by running the command <command>univention-run-join-scripts</command> as user <systemitem class="username">root</systemitem>.
		</para>

		<para>
			Subsequently the UCS system needs to be restarted.
		</para>

		<section id="repo:verify">
			<title>Operating a local repository server / pre-up/ post-up scripts</title>
			<para>
				Pre-up and post-up scripts are scripts which are run before and after release updates
				(e.g., for post-processing the update, for example by uninstalling obsolete packages).
				As of UCS 3.2, these scripts are cryptographically signed to prevent unauthorized modification.
				During the update and when mirroring the repository these signatures are checked.
				If they're invalid or missing, the action is aborted.
			</para>

			<para>
				If a repository server is operated with UCS 3.1-x, it should be updated to UCS 3.2 before additional systems can be updated to UCS 3.2-1 or newer.
			</para>

			<para>
				If it is not possible to update the repository server, the signature files must be downloaded manually:
			</para>

			<programlisting language="sh">
LOCAL_DIR="/var/lib/univention-repository/mirror"
SERVER="http://updates.software-univention.de"
for release in 3.2-0 3.2-1 3.2-2 3.2-3 3.2-4 3.2-5 3.2-6 3.2-7; do
	for script in preup postup; do
		file="3.2/maintained/$release/all/$script.sh.gpg"
		wget -O "$LOCAL_DIR/$file" "$SERVER/$file"
	done
done
			</programlisting>

			<para>
				Alternatively, it is also possible to disable the signature checks, which can be a security risk.
				For the repository server this can be done by setting the &ucsUCRV; <envar>repository/mirror/verify</envar> to <literal>false</literal>.
				For the update the &ucsUCRV; <envar>repository/online/verify</envar> must be set to <literal>false</literal> on all systems.
			</para>
		</section>
	</chapter>


	<chapter id="relnotes:packages">
		<title>Further notes on selected packages</title>

		<section id="relnotes:usage">
			<title>Collection of usage statistics when using the <phrase>free-for-personal-use</phrase> version</title>
			<para>
				Anonymous usage statistics on the use of &ucsUMC; are collected when using the <phrase>free for personal use</phrase> version of UCS (which is generally used for evaluating UCS).
				The modules opened are logged in an instance of the web traffic analysis tool Piwik.
				This makes it possible for Univention to tailor the development of &ucsUMC; better to customer needs and carry out usability improvements.
			</para>
			<para>
				This logging is only performed when the <phrase>free-for-personal-use</phrase> license is used.
				The license status can be verified by clicking on the cog symbol in the top right corner of the &ucsUMC; and selecting <guimenu>License information</guimenu>.
				If <phrase>Free for personal use edition</phrase> is listed under <guimenu>License type</guimenu>, this version is in use.
				When a regular UCS license is used, no usage statistics are collected.
			</para>
			<para>
				Independent of the license used, the statistics generation can be deactivated by setting the &ucsUCRV; <envar>umc/web/piwik</envar> to <literal>false</literal>.
			</para>
		</section>

		<section id="relnotes:uefi">
			<title>UEFI installation DVD</title>
			<para>
				In addition to the standard installation DVD there is also a medium with support for the Unified Extensible Firmware Interface standard (<acronym>UEFI</acronym>) available for the amd64 architecture.
			</para>

			<para>
				It must be used instead of the standard DVD on systems which only support a UEFI boot.
			</para>
		</section>

		<section id="relnotes:secbrowsers">
			<title>Scope of security support for WebKit, Konqueror and QtWebKit</title>
			<para>
				WebKit, Konqueror and QtWebKit are shipped in the maintained branch of the UCS repository, but not covered with security support.
				WebKit is primarily used for displaying HTML help pages etc.
				Firefox should be used as web browser.
			</para>
		</section>

		<section id="relnotes:browsers">
			<title>Recommended browsers for the access to Univention Management Console</title>

			<para>
				&ucsUMC; uses numerous JavaScript and CSS functions to display the web interface.
				Cookies need to be permitted in the browser.
				The following browsers are recommended:
			</para>

			<itemizedlist>
				<listitem>
					<para>Chrome as of version 14</para>
				</listitem>

				<listitem>
					<para>Firefox as of version 10</para>
				</listitem>

				<listitem>
					<para>Internet Explorer as of version 9</para>
				</listitem>

				<listitem>
					<para>Safari (on the iPad 2)</para>
				</listitem>
			</itemizedlist>

			<para>
				Users with older browsers may experience display or performance problems.
			</para>
		</section>

		<section id="relnotes:s4limits">
			<title>Restrictions in Samba 4 operation</title>
			<para>
				Some Active Directory functions are currently not available in Samba 4:
			</para>

			<itemizedlist>
				<listitem>
					<para>
						Microsoft Windows domain controllers must not be joined in a Samba 4 domain and vice versa.
					</para>
				</listitem>

				<listitem>
					<para>
						Selective replication is not possible with Samba 4 as this is not supported by Active Directory in principle (in UCS@school selective replication is implemented through the listener/notifier replication mechanism).
					</para>
				</listitem>

				<listitem>
					<para>
						Samba 4 does not support forest domains.
					</para>
				</listitem>

				<listitem>
					<para>
						Samba 4 does not support trust relationships.
					</para>
				</listitem>
			</itemizedlist>

			<para>
				Further information can be found in Chapter 8 of the <biblioref linkend="ucs-manual"/>.
			</para>
		</section>

		<section id="relnotes:virtualbox">
			<title>Installation in <wordasword>VirtualBox</wordasword></title>
			<para>
				During the installation of UCS in the virtualization solution <wordasword>VirtualBox</wordasword>, a <wordasword>VirtualBox</wordasword> bug may appear which has been corrected in version 4.2:
				if UCS has been successfully installed and the DVD is still in the disk drive, the installation DVD offers the option <guimenu>Boot from first harddisk partition</guimenu>.
				If you select this option, <wordasword>VirtualBox</wordasword> freezes.
			</para>

			<para>
				For Linux distributions which still use <wordasword>VirtualBox</wordasword> 4.0 or 4.1, either the installation DVD should be removed from the drive settings of the <wordasword>VirtualBox</wordasword> VM or <keycap>F12</keycap> pressed when starting the virtual instance and the hard drive selected as a boot partition as a workaround before starting the UCS VM.
				UCS will then start successfully.
			</para>
		</section>

		<section id="relnotes:xenserver">
			<title>Installation in <wordasword>Citrix XenServer</wordasword></title>
			<para>
				When UCS is installed in the virtualization solution <wordasword>Citrix XenServer 6.0 - 6.2</wordasword>, the GRUB menu of the Univention installer is not shown with the <wordasword>Cirrus</wordasword> graphics card emulated as standard.
				The Univention Installer can be started directly by pressing the <keycap function="enter">ENTER</keycap> key;
				alternatively, the installation starts automatically after sixty seconds.
				The Univention Installer which then starts is displayed as normal.
			</para>

			<para>
				To display GRUB correctly, the graphics card emulated by <wordasword>XenServer</wordasword> can be reconfigured.
				This is done by logging on to the XenServer system as the <systemitem class="username">root</systemitem> user.
				Firstly, the <command>xe vm-list</command> command is used to determine the UUID of the virtual machine.
				The following command is then used to reconfigure the emulated graphics card to VGA:

				<programlisting language="sh">
xe vm-param-set uuid=UUIDVM platform:vga=std
				</programlisting>
			</para>
		</section>

		<section id="relnotes:s3tos4">
			<title>Migration of a Samba 3 environment to Samba 4</title>
			<para>
				There are two basic procedures for migrating Samba 3 to Samba 4:
			</para>

			<itemizedlist>
				<listitem>
					<para>
						Setup of a parallel Samba 4 domain.
						Both domains use different NetBIOS names and SIDs.
						The clients then join the Samba 4 step by step.
					</para>
				</listitem>

				<listitem>
					<para>
						Migration of all systems within one maintenance window.
					</para>
				</listitem>
			</itemizedlist>

			<para>
				Both procedures are documented in detail in the Univention Wiki:
				<ulink url="http://wiki.univention.de/index.php?title=Migration_from_Samba_3_to_Samba_4"/>.
			</para>
		</section>

		<section id="relnotes:xenhopt">
			<title>Xen</title>
			<para>
				If the Xen hypervisor is used and the memory limit for the <systemitem>dom0</systemitem> has been configured using the &ucsUCR;-Variable <envar>grub/xenhopt</envar>, the value should be updated to include the <emphasis>,max:</emphasis> part as well.
				See the <ulink url="http://wiki.univention.de/index.php?title=UVMM_Quickstart-3.1/en#Configuring_the_Dom0"/> for details.
			</para>
		</section>
	</chapter>

	<chapter id="relnotes:changelog">
		<title>Changelog</title>
		<para>
			Listed are the changes since UCS 3.2-6:
		</para>

		<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="changelog-3.2-7.xml" xpointer="xpointer(/chapter/section)"/>
	</chapter>

	<bibliography id="relnotes:bibliography">
		<bibliomixed id="ucs-manual"/>
	</bibliography>

	<?dbhtml-include href="../stylesheets/piwik.html"?>
</book>
<!-- vim: set ts=4 sw=4 noet: -->
