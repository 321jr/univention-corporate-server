\newcommand{\ucsUCRV}[1]{Univention Configuration Registry variable \ucsCommand{\ucsBCindex{#1}}}
%\newcommand{\ucsCVE}[1]{\href{http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-#1}{CVE-#1}}
\newcommand{\ucsCVE}[1]{\href{http://security-tracker.debian.org/tracker/CVE-#1}{CVE-#1}}

%\section{General}
%\begin{itemize}
%\end{itemize}


%\section{Univention Installer}
%\begin{itemize}
%\end{itemize}

%%\subsection{Profile-based installation}
%%\begin{itemize}
%%\end{itemize}


%\section{Upgrade provisions (preup and postup scripts)}
%\begin{itemize}
%\end{itemize}


\section{Basic system services}

%\subsection{Boot loader}
%\begin{itemize}
%\end{itemize}

%\subsection{Linux kernel and firmware packages}
%\begin{itemize}
%\end{itemize}

\subsection{Univention Configuration Registry}
\begin{itemize}
\item The process handling in \ucsName{univention-config-registry} has been improved to prevent issues with process
  signals during system calls (\ucsBug{31140}).

\item The Univention Config Registry layers were processed in the wrong order when using the 'search' subcommand. Now all commands consistently return the value from the layer with the highest priority, which are 'force', 'schedule', 'ldap' and 'normal' (\ucsBug{29632}).

\item UCR now writes the changes to a temporary file first and moves the file
in a second step, otherwise the file might be not completly written if UCR
tries to read a variable (\ucsBug{31725}).
\end{itemize}

%% \subsubsection{Changes to templates and modules}
%% \begin{itemize}
%% \end{itemize}

%\subsubsection{Internal changes}
%\begin{itemize}
%\end{itemize}

%\subsection{Network interface configuration}
%\begin{itemize}
%\end{itemize}

%\subsection{Univention Firewall}
%\begin{itemize}
%\end{itemize}


\section{Domain services}
%\begin{itemize}
%\end{itemize}

\subsection{OpenLDAP}
\begin{itemize}
\item A segmentation fault in the slapd LDAP server process in cases where
non-UTF-8 passwords were used for LDAP bind against the \{K5KEY\} scheme has
been fixes (\ucsBug{31352}).

\item The slapcat output could get truncated during univention-ldap-backup.
This issue has been fixed (\ucsBug{31170}).

\item The unused \ucsUCRV{ldap/server/additional} has been removed from \ucsName{univention-ldap}; use \ucsCommand{\ucsBCindex{ldap/server/addition}} instead (\ucsBug{24507}).
\end{itemize}

%\subsection{LDAP ACL changes}
%\begin{itemize}
%\end{itemize}

%\subsection{LDAP schema changes}
%\begin{itemize}
%\end{itemize}

%\subsection{Listener/Notifier domain replication}
%\begin{itemize}
%\end{itemize}

%\subsection{Domain joins of UCS systems}
%\begin{itemize}
%\end{itemize}


\section{Univention Management Console}

\subsection{Univention Management Console web interface}
\begin{itemize}
\item Fixed regression in form validation with certain FormWidgets
  (\ucsBug{30965}).
\item Fixed width of ConfirmDialog in Firefox (\ucsBug{30102}).
\item The width of \emph{textarea} fields has been fixed
  (\ucsBug{30889}).
\item A problem in the Text widget has been corrected which caused to
  a 404 error (\ucsBug{28810}).
\item Inside the ,,favorite'' category, favorites can no longer be
  removed (\ucsBug{29555}).
\item The username input field of the login dialog stays disabled
  after a failed relogin (\ucsBug{27989}).
\item A problem with scrollbars in the Dialog widget has been
  corrected (\ucsBug{30796}).
\item UMC login problems with the demo configuration package installed have
  been corrected (\ucsBug{31091}).
\item The internal caching mechanism for list entries (e.g., DHCP/DNS
  entries and IP/MAC addresses for computers) has been improved as it
  could previously lead to inconsistencies in rare cases (\ucsBug{31510}).
\item The \ucsName{univention-demo-configuration} package has been
  updated in order to allow two new \emph{UMCP} commands. The former
  package version leads to an error message when opening the
  \ucsName{App center} or the \ucsName{Online Updater} UMC module. This
  issue has been fixed (\ucsBug{31567}).
\item The validate function of the \emph{Form} widget has been corrected.
  Previously, no exclamation mark has been displayed when a widget had an
  invalid value (\ucsBug{31337}).
\end{itemize}

\subsection{Univention Management Console server}
\begin{itemize}
\item Unexpected errors that caused \ucsName{UMC} server and modules to exit are now logged (\ucsBug{31130}).
\end{itemize}

\subsection{Univention App Center}
\begin{itemize}
\item Fixed an issue when closing the App Center tab in the Management Console:
  The backend shut down the module when no further requests regarding the
  progress of an installation was sent. When this happened during installation
  the package database could become temporarily broken (\ucsBug{30611}).
\item Prevent concurrent package operations in the same session
  (\ucsBug{31382}).
\item Added a progress bar while fetching software changes in App Center and
  speeded up the process of retrieving this information (\ucsBug{30798}).
\item Made free memory calculation more robust in OpenVZ environments
  (\ucsBug{30659}).
\item Added switch to install the latest version of the application in
  \ucsName{univention-add-app} (\ucsBug{31157}).
\item Fixed app installation with --all and --master when pointing to an
  outdated app version in \ucsName{univention-add-app} (\ucsBug{31279}).
\item The full progress bar is used while installing an application when not
  installing packages on other servers in the domain (\ucsBug{31184}).
\item If an application is installed, the system does not dist-upgrade anymore.
  If the app is upgraded, the system still does a dist-upgrade but shows a
  warning that the dist-upgrade may include errata updates (\ucsBug{31129},
  \ucsBug{31278}).
\item The button to request a new license is shown even when the application
  cannot be installed (\ucsBug{31166}).
\item A typo in the command line tool
  \emph{univention-management-console-client} has been corrected
  (\ucsBug{30605}).
\item \emph{UNIVENTION\_DEBUG\_BEGIN} and \emph{UNIVENTION\_DEBUG\_END}
  information are no longer logged (\ucsBug{29603}).
\item Fixed resolving dependencies of packages: Errors from apt are handled
  correctly (\ucsBug{31055}).
\item Under certain circumstances packages installed directly by the App Center
  could be marked as automatically installed and thus be autoremoved. This has
  been corrected (\ucsBug{31155}).
\item A problem which caused to crash the UMC server when setting an
  invalid locale has been corrected (\ucsBug{28657}).
\item Fixed a segfault that happened while upgrading an app under certain
  circumstances. Now the package manager always uses the latest package cache
  (\ucsBug{31282}).
\end{itemize}

\subsection{Univention Management Console / Univention Directory Manager modules}
\begin{itemize}
\item The UCS license check now ignores temporary user objects (\ucsBug{31167}).
\item The attributes ,,User ID'', ,,Group ID'' and ,,GECOS'' in the users module, ,,FQDN'' in the computers
  module and ,,Next IP'' in the network module have been removed from the advanced search as they
  are not searchable in the UMC (\ucsBug{28803}).
\item A broken LDAP authentification in \ucsName{proof\_dns\_dhcp\_records} has been corrected (\ucsBug{30903}).
\item The following syntax classes received lookup optimizations
  which result in faster object opening especially in larger environments:
  ,,UserDN'', ,,UserID'', ,,GroupDN'', ,,GroupID'', ,,UCS\_Server'',
  ,,DNS\_ForwardZone'', ,,DNS\_ReverseZone'', ,,WritableShare''
  (\ucsBug{30991}).
\item All syntax files and hooks files are re-evaluated every time a new
  session is created. This prevents errors caused by referenced classes unknown
  during \ucsName{univention-management-console-server} startup
  (\ucsBug{31154}).
\item The debug output is now explicitly flushed in order to prevent
  partial or missing lines in the log file (\ucsBug{31421}).
\end{itemize}

\subsubsection{Basic settings / Univention System Setup}
\begin{itemize}
\item \ucsUCRV{apache2/startsite} will be set to correct values when reinstalling, 
uninstalling and updating univention-system-setup-boot (\ucsBug{31385} \ucsBug{31643}).
\item Added error handling in case the download of required packages for
\ucsName{univention-system-setup-boot} failed. This could prevent a
role switch when configuring the system in appliance setup (\ucsBug{30896}).
\item Disabled Firefox update popups during appliance setup (\ucsBug{30980}).
\end{itemize}

\subsubsection{Users module}
\begin{itemize}
\item Spaces are no longer allowed in the username (this can be overwritten by setting the
\ucsUCRV{directory/manager/web/modules/users/user/properties/username/syntax} to \emph{string}, \ucsBug{19441}).
\item Some old code has been removed (\ucsBug{28671}).
\end{itemize}

%% \subsubsection{Extended attributes}
%% \begin{itemize}
%% \end{itemize}

%\subsubsection{License module}
%\begin{itemize}
%\end{itemize}

%% \subsubsection{Mail module}
%% \begin{itemize}
%% \end{itemize}

%\subsubsection{System services module}
%\begin{itemize}
%\end{itemize}

%\subsubsection{Domain join module}
%\begin{itemize}
%\end{itemize}

%\subsubsection{Online update module}
%\begin{itemize}
%\end{itemize}

\subsubsection{Computers module}
\begin{itemize}
\item A problem has been corrected which led to invalid PTR records when
  changing the DNS forward zone of a computer object, or to the loss of PTR
  records when changing it's DNS reverse zone (\ucsBug{30905}).
\item A traceback which occurred when removing the MAC address or network from
  a computer with DHCP entry has been fixed (\ucsBug{28945}, \ucsBug{29676}).
\end{itemize}

%% \subsubsection{Policies}
%% \begin{itemize}
%% \end{itemize}

%\subsubsection{Printers module}
%\begin{itemize}
%\end{itemize}

%\subsubsection{DHCP module}
%\begin{itemize}
%\end{itemize}

%\subsubsection{UCR module}
%\begin{itemize}
%\end{itemize}

%\subsubsection{Policies}
%\begin{itemize}
%\end{itemize}

%\subsubsection{LDAP directory browser}
%\begin{itemize}
%\end{itemize}

\subsubsection{Other modules}
\begin{itemize}
\item A mapping which broke the representation of TXT records for DNS forward
  zones has been fixed (\ucsBug{29681}).
\item The pointer record attribute of the DNS pointer module is now a multi
value attribute (\ucsBug{28667}, \ucsBug{31103}).
\item The term ,,UDM Web'' in the extended attributes module has been replaced
  by ,,UMC'' (\ucsBug{27948}).
\item The english and german texts of the \emph{System information}
  module have been adapted (\ucsBug{30797}).
\item Support of ext4 partitions has been added to the filesystem quota module
  (\ucsBug{24357}).
\item A typo in the german localization in
  \ucsName{univention-management-console-module-quota} has been corrected
  (\ucsBug{28377}).
\item The shutdown/reboot message in the \emph{Reboot} module has been
  adapted. Furthermore the \emph{cancel} button in the confirmation
  dialog is the default now (\ucsBug{22831}).
\item The use of eval() has been replaced with getattr() in several \ucsName{UMC} modules (\ucsBug{31523}).
\end{itemize}

%\subsection{Univention Directory Manager command line interface and related tools}
%\begin{itemize}
%\end{itemize}

%\subsection{Development of modules for Univention Management Console}
%\begin{itemize}
%\end{itemize}


%\section{Software deployment}
%\begin{itemize}
%\end{itemize}

%%\subsection{Repository handling}
%%\begin{itemize}
%%\end{itemize}

%%\subsection{Software deployment command line tools}
%%\begin{itemize}
%%\end{itemize}

%%\subsection{Software monitor (univention-pkgdb)}
%%\begin{itemize}
%%\end{itemize}


%\section{Univention Library}
%\begin{itemize}
%\end{itemize}


\section{System services}

%\subsection{DHCP}
%\begin{itemize}
%\end{itemize}

%\subsection{DNS}
%\begin{itemize}
%\end{itemize}

%\subsection{Cyrus}
%\begin{itemize}
%\end{itemize}

%\subsection{Postfix}
%\begin{itemize}
%\end{itemize}

%\subsection{Spam/virus detection and countermeasures}
%\begin{itemize}
%\end{itemize}

\subsection{Printing services}
\begin{itemize}
\item Changed in \ucsName{univention-printserver} SystemGroup parameter. SystemGroups are now separated by a blank character and not by a comma in cupsd.conf (\ucsBug{28884}).

\item Always create a samba printers config file
(/etc/samba/printers.conf.d/<printer>) and not only if client driver is
activated, the samba name is set or ACLs are defined (\ucsBug{30432}).

\item Added in \ucsName{univention-printserver} ErrorPolicy to the cups template. ErrorPolicy can be set over ucr varibale 'cups/errorpolicy'. The change will be applied to all printers. (\ucsBug{28877}).

\item Modified in \ucsName{univention-printserver} "univention-ldapsearch" in join scripts to request LDAP on DC-Master not on local DC.(\ucsBug{19101}).

\item Descriptions for the Univention Configuration Registry variables used in
\ucsName{univention-check-printers} have been added (\ucsBug{22544}).

\end{itemize}

%\subsection{Kerberos}
%\begin{itemize}
%\end{itemize}

\subsection{Proxy services}
\begin{itemize}
\item Fixed a regression in \ucsName{squid} group authentication if \ucsUCRV{squid/auth/allowed\_groups}
was not set (\ucsBug{30969}).
\item When using \ucsName{squid} with ntlm authentication it is now checked if the user account
is locked or disabled (\ucsBug{29492}).
\end{itemize}

%\subsection{Apache}
%\begin{itemize}
%\end{itemize}

%\subsection{Nagios}
%\begin{itemize}
%\end{itemize}

%\subsection{SSL}
%\begin{itemize}
%\end{itemize}

%\subsection{NFS}
%\begin{itemize}
%\end{itemize}

\subsection{PAM / Local group cache}
\begin{itemize}
\item The \ucsUCRV{nssldap/nss\_srv} has been added to
\ucsName{univention-pam} to specify whether or not \ucsName{libnss-ldap}
is allowed to perform dns srv record lookups (default: true,
\ucsBug{30779}).
\item Added a test in \ucsName{libnss-ldap} postinst to prevent override
of libnss-ldap.secret if it is a link \ucsBug{30779}).
\end{itemize}

\subsection{Other services}
\begin{itemize}
\item The config option nss\_srv (to deny dns srv record lookups) has
been add to \ucsName{libnss-ldap} (\ucsBug{30779}).
\item Create empty \ucsName{postgresql} config files during postrm so that postgresql can be reinstalled (\ucsBug{27786}).
\item Restart \ucsName{postgresql} server in postinst (\ucsBug{27786}).
\end{itemize}


\section{Virtualisation}
%\begin{itemize}
%\end{itemize}

%\subsection{libvirt}
%\begin{itemize}
%\end{itemize}

\subsection{Univention Virtual Machine Manager}
\begin{itemize}
\item The context menu on the devices page of active VMs no longer disappears when the mouse is moved (\ucsBug{29261}).
\item A typo in the German translation has been fixed (\ucsBug{22377}).
\item To fix the ordering of snapshots their creation time is now display in ISO 8601 format (\ucsBug{29901}).
\item Shutting down virtual machines using 'ACPI power off' and 'Xen shutdown' was added (\ucsBug{21397}).
\item The internal code of UVMM was cleaned up (\ucsBug{30897}).
\end{itemize}

\subsection{Xen}
\begin{itemize}
\item A logic bug in the init script for \ucsName{xenstore} was fixed (\ucsBug{28309}).
\item CD-ROM media changes is now also supported with Xen-HVM domains (\ucsBug{23394}).
\end{itemize}

%\subsection{QEMU/kvm}
%\begin{itemize}
%\end{itemize}


\section{Desktop packages}
\begin{itemize}
\item \ucsName{univention-x-core} no longer depends on the package
\ucsName{univention-gdm} but recommends it (\ucsBug{31004}).
\end{itemize}


\section{Services for Windows}
%\begin{itemize}
%\end{itemize}

\subsection{Samba 3}
\begin{itemize}
\item Samba 3 does now support quota on XFS file systems like expected, for example the calculation of the partition limit or the used space (\ucsBug{31210}).
\item There is now a service definition for \ucsName{winbind} (\ucsBug{9560}).
\item The winbind init script did not ensure that the daemon actually got stopped. This could lead
 to a non running winbind daemon after the server password change. This issue has been fixed
 (\ucsBug{31289}).
\item The file \ucsFile{/etc/samba/shares.conf} is now refreshed directly after changing a share (\ucsBug{29399}).
\end{itemize}

\subsection{Samba 4}
\begin{itemize}
\item \ucsUCRV{windows/wins-server} is now initiated when joining  (\ucsBug{30813}).
\item Samba 4 does now support quota on XFS file systems (\ucsBug{31234}).
\item Joining into a new \ucsName{samba4/join/site} without Samba4 on the Master now repects the chosen \ucsName{samba4/dc} (\ucsBug{30792}).
\item The sysvol-sync.py script did not preserve timestamps, now it does (\ucsBug{30823}).
\item The sysvol-cleanup.py script moved the PolicyDefinitions away. Now it considers only GPO paths (\ucsBug{31186}).
\item The unused UCR variables \ucsUCRV{samba/client\_use\_spnego} and \ucsUCRV{samba/time\_server} has been removed (\ucsBug{26389}).
\item Periodic refresh of sysvol fACLs for the group Authenticated Users can
now be disabled with the new \ucsUCRV{samba4/sysvol/sync/setfacl/AU} \ucsBug{31271}).
\item Samba4 DCs are now added to the group Enterprise Domain Controllers
by default during initial join (\ucsBug{31437}).
\item The listener module samba4-idmap now also works in case smb.conf includes files readable
only for root (\ucsBug{31538}).
\end{itemize}

\subsection{Univention S4 Connector}
\begin{itemize}
\item The attribute sambaMaxPwdAge can be set to -1 in OpenLDAP. This will
  now be mapped to 0 in Samba 4 since -1 is not allowed for the attribute
  maxPwdAge (\ucsBug{29775}).
\item Samba4 DCs are now added to the group Enterprise Domain Controllers (\ucsBug{31437}).
\end{itemize}

%\subsection{Univention Active Directory Connector}
%\begin{itemize}
%\end{itemize}


\section{UCS test framework}
\begin{itemize}
\item A test has been added to check if the ,,Administrator'' user may execute
  \ucsCommand{univention-directory-manager users/user list --filter uid=Administrator} (\ucsBug{30116}).

\item A test case for \ucsName{univention-dnsedit} has been added (\ucsBug{31104}).

\item A test case for the server password change has been added (\ucsBug{31295}).

\item The function \ucsName{user\_create} from the internal test framework now checks whether the
mail domain exists or not. If the mail domain for the local domain does not exist the user is
created without a mail address (\ucsBug{31296}).
\item The test case for validating that groupname LDAP locking objects
  are removed properly will not be executed on DC slaves anymore
  (\ucsBug{11417})
\item The UCR variables \ucsUCRV{tests/domainadmin/account},
    \ucsUCRV{tests/domainadmin/pwd} and \ucsUCRV{tests/domainadmin/pwdfile}
    have been added. They can be used to configure which domain administrator
    credentials UCS test should use when running tests (\ucsBug{31250}).

\item The connector tests have been reordered to avoid a connector restart for every test (\ucsBug{31677}).

\item The different return codes of ucs-test have been merged (\ucsBug{31734}).


\end{itemize}

\section{mail}
\begin{itemize}
\item \ucsName{univention-mail-cyrus} has been modified. UCR variable mail/cyrus/imap/duplicatesuppression added. Default value is ``yes''. If set the variable to ``yes'' lmtpd will suppress delivery of a message to a mailbox if same message with the same message-id (or resent-message-id) has already been delivered to the mailbox (\ucsBug{22429}).

\item \ucsName{univention-antivir-mail} has been modified. Postfix configuration will be reloaded after installation (\ucsBug{17967}).

\item \ucsName{univention-spamassassin} has been modified. Obsolete \ucsUCRV{mail/antispam/globalfolder} has been removed (\ucsBug{31072}).

\end{itemize}

\section{base}
\begin{itemize}
\item \ucsName{univention-lib}. base.sh file: function call\_joinscript() has been modified. The start and end of  every executed joinscript will be displayed on console. Assist for a better tracing (\ucsBug{29263}).

\item \ucsName{univention-debmirror}. When uninstall package symlink '/etc/apache2/sites-enabled/univention-repository' will be removed. (\ucsBug{29262}).

\item The generation of internally used passwords (e.g. machine passwords) has
been unified. Several packages now using a special function from
\ucsName{shell-univention-lib} respectively \ucsName{python-univention-lib} to
create such password. The length and complexity can be configured via the
\ucsUCRV{machine/password/length} and
\ucsCommand{\ucsBCindex{machine/password/complexity}} (\ucsBug{31281}).

\item The rotation of machine passwords is now performed after amount of days
in \ucsUCRV{server/password/change} since the last password change
(\ucsBug{31068}).

\end{itemize}


\section{Other changes}
\begin{itemize}
\item \ucsName{univention-user-quota} has been rewritten in python. It does
  now support share names with whitespaces (\ucsBug{30636}).
\item The drbd8 userland tools have been updated to version 8.3.11 (\ucsBug{31321}).
\item Shell escaping in \ucsName{univention-home-mounter} has been fixed (\ucsBug{19441}).
\item \ucsName{univention-backup2master} now also replaces the
\ucsUCRV{kerberos/adminserver} with the new masters's FQDN (\ucsBug{31077}).

\item The packages \ucsName{libdbd-mysql}, \ucsName{libjs-jquery} and
\ucsName{libjs-jquery-ui} have been added to the maintained section of the
software repository (\ucsBug{31562}).

\end{itemize}

%% \subsection{ucslint}
%% \begin{itemize}
%% \end{itemize}
