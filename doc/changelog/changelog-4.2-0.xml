<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE chapter  PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
	"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
	<!ENTITY % extensions SYSTEM "../stylesheets/macros.ent" >
	%extensions;
	<!ENTITY % entities SYSTEM "../stylesheets/macros-en.ent" >
	%entities;
]>
<chapter id="relnotes:changelog" lang="en">
	<title>Changelog</title>
	<section id="changelog:general">
		<title>General</title>
		<itemizedlist>
			<listitem>
				<para>
					The Debian basis has been updated from Debian 7 (Wheezy) to Debian 8 (Jessie) (<u:bug>43560</u:bug>, <u:bug>41930</u:bug>, <u:bug>41929</u:bug>).
					This means, among other things, the following upgrades:
				</para>
				<itemizedlist>
					<listitem><simpara>
						Apache has been updated to 2.4.10.
					</simpara></listitem>
					<listitem><simpara>
						The BIND DNS server has been updated to 9.9.5.
					</simpara></listitem>
					<listitem><simpara>
						OpenSSH has been updated to 6.7.
					</simpara></listitem>
					<listitem><simpara>
						Perl has been updated to 5.20.2.
					</simpara></listitem>
					<listitem><simpara>
						PHP has been updated to 5.6.30.
					</simpara></listitem>
					<listitem><simpara>
						Postfix has been updated to 2.11.3.
					</simpara></listitem>
					<listitem><simpara>
						UCS ships with <package>systemd-sysv</package> as default init system.
						This package is installed automatically on upgrades.
						All UCS init shell scripts have been made LSB compliant to be compatible with <application>systemd</application>.
						If custom init scripts are used or standard UCS init scrips haven been modified, please be aware that these may now have been superseded by <application>systemd</application> unit files or <systemitem class="service">systemd</systemitem> itself (<u:bug>43330</u:bug>).
					</simpara></listitem>
				</itemizedlist>
			</listitem>
			<listitem><simpara>
				The codename for UCS 4.2 has been set to <wordasword>Lesum</wordasword> (<u:bug>42054</u:bug>).
			</simpara></listitem>
		</itemizedlist>
	</section>

	<section id="changelog:installer">
		<title>Univention Installer</title>
		<itemizedlist>
			<listitem><simpara>
			</simpara></listitem>
		</itemizedlist>
	</section>


	<section id="changelog:basic">
		<title>Basic system services</title>

		<section id="changelog:basic:kernel">
			<title>Linux kernel and firmware packages</title>
			<itemizedlist>
				<listitem><simpara>
					The Linux kernel has been updated to 4.9.13 (<u:bug>42048</u:bug>, <u:bug>42047</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The kernel modules <package>openafs-modules-dkms</package>, <package>blktap-dkms</package>, <package>virtualbox-dkms</package>, <package>virtualbox-guest-dkms</package>, <package>open-vm-tools-dkms</package>, <package>backfire-dkms</package> and <package>oss4-dkms</package> have been updated to be compatible with the new Linux kernel 4.9.
					The modules <package>iscsitarget-dkms</package> and <package>xtables-addons-dkms</package> are no longer supported <u:bug>42049</u:bug>.
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:basis:ucr">
			<title>Univention Configuration Registry</title>
			<itemizedlist>
				<listitem><simpara>
					The maximum transfer unit (<acronym>MTU</acronym>) for network interfaces can now be configured through the new &ucsUCRV; <envar>interfaces/<replaceable>interface</replaceable>/mtu</envar> (<u:bug>35814</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The functions <function>remove_ucr_template</function> and <function>remove_ucr_info_file</function> from the shell library <filename>ucr.sh</filename> have been deprecated.
					The library itself was moved into the package <package>univention-config</package> (<u:bug>27872</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					<command>ucr update</command> is now automatically called when &ucsUCR; template files are added/modified/removed (<u:bug>23737</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					&ucsUCR; now loads its data atomically to fix a problem when multiple threads access the database concurrently (<u:bug>37402</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The robustness of the services module has been improved to better handle process changes (<u:bug>34234</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					An internal fallback implementation for <function>pipes.quote()</function> was added to fix an upgrade issue while <package>python</package> is not configured (<u:bug>43341</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The Python implementation has been changed to follow the Python contract for dictionaries, except one exception:
					The method <function>get()</function> still returns <literal>None</literal> instead of raising the exception <literal>KeyError</literal> when the key is not found, as this is still required to be compatible with previous releases (<u:bug>33101</u:bug>).
				</simpara></listitem>
			</itemizedlist>

			<section id="changelog:basis:ucr:template">
				<title>Changes to templates and modules</title>
				<itemizedlist>
					<listitem><simpara>
						The <envar>*/autostart</envar> &ucsUCRV;s are now handled by a generic &ucsUCR; module.
						The variables are still used in the individual init-scripts for backward compatibility with the classic System V init system, but are shadowed by the corresponding <application>systemd</application> mechanisms to enable/disable and mask/unmask services (<u:bug>43470</u:bug>).
					</simpara></listitem>
				</itemizedlist>
			</section>
		</section>

		<section id="changelog:basis:boot">
			<title>Boot Loader</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:basis:other">
			<title>Other system services</title>
			<itemizedlist>
				<listitem><simpara>
					Several network start scripts have been adapted to work with <application>systemd</application> (<u:bug>42380</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>
	</section>

	<section id="changelog:domain">
		<title>Domain services</title>

		<section id="changelog:domain:openldap">
			<title>OpenLDAP</title>
			<itemizedlist>
				<listitem><simpara>
					The overlay module <filename>shadowbind</filename> has been added. This module checks
					<property>shadowExpire</property> and <property>shadowMax</property>/<property>shadowLastChange</property> of the bind DN object
					and denies the login if the account or the password is expired.
					The overlay can be enabled/disabled with the &ucsUCRV;
					<envar>ldap/shadowbind</envar>. An ignore LDAP filter (<filename>shadowbind</filename>
					does not check account/password expiry if the bind DN object
					matches this filter) can be configured with the &ucsUCRV;
					<envar>ldap/shadowbind/ignorefilter</envar> (<u:bug>36215</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					If the <command>slapd</command> is already running when trying to start, the init-script does not signal failure anymore.
					A 5 second delay when starting <command>slapd</command> was removed (<u:bug>43450</u:bug>).
				</simpara></listitem>
			</itemizedlist>

			<section id="changelog:domain:openldap:acl">
				<title>LDAP ACL changes</title>
				<itemizedlist>
					<listitem><simpara>
						The <package>slapd</package> configuration option <property>add_content_acl</property> has been turned on (<u:bug>41797</u:bug>).
					</simpara></listitem>
					<listitem><simpara>
						The overlay module <property>constraint</property> has been enabled.
						Security restrictions for the attributes <property>uidNumber</property> and <property>gidNumber</property> have been added.
						The value "0" is no longer valid for these attributes (<u:bug>43312</u:bug>).
					</simpara></listitem>
				</itemizedlist>
			</section>

			<section id="changelog:domain:openldap:schema">
				<title>LDAP schema changes</title>
				<itemizedlist>
					<listitem><simpara>
					</simpara></listitem>
				</itemizedlist>
			</section>

			<section id="changelog:domain:openldap:replication">
				<title>Listener/Notifier domain replication</title>
				<itemizedlist>
					<listitem><simpara>
						The Listener daemon is now compiled with hardening options and return code checks have been improved (<u:bug>26039</u:bug>).
					</simpara></listitem>
					<listitem><simpara>
						Kerberos support was removed from the Listener (<u:bug>42678</u:bug>).
					</simpara></listitem>
					<listitem><simpara>
						The Listener cache backend has been converted to LMDB (<u:bug>23367</u:bug>).
					</simpara></listitem>
				</itemizedlist>
			</section>

			<section id="changelog:domain:dnsserver">
				<title>DNS server</title>
				<itemizedlist>
					<listitem><simpara>
						The timeout and retry handling of the BIND9 LDAP database plugin has been improved (<u:bug>42389</u:bug>).
					</simpara></listitem>
					<listitem><simpara>
						During the update of DNS servers having <package>univention-bind</package> installed the &ucsUCR; settings <envar>nameserver<replaceable>123</replaceable></envar> and <envar>dns/forwarder<replaceable>123</replaceable></envar> are checked and fixed automatically.
						This is done by running <command>/usr/share/univention-server/univention-fix-ucr-dns</command> once (<u:bug>43217</u:bug>).
					</simpara></listitem>
					<listitem><simpara>
						The legacy System V init scripts <filename>univention-bind</filename> and <filename>univention-bind-proxy</filename> have been removed.
						The services are now handled through the System V init script <filename>bind9</filename> and the <application>systemd</application> service unit file <filename>bind9.service</filename> (<u:bug>43690</u:bug>).
					</simpara></listitem>
				</itemizedlist>
			</section>

			<section id="changelog:domain:dhcpserver">
				<title>DHCP server</title>
				<itemizedlist>
					<listitem><simpara>
						Quoting of the server name has been added (<u:bug>42240</u:bug>).
					</simpara></listitem>
				</itemizedlist>
			</section>
		</section>
	</section>

	<section id="changelog:umc">
		<title>Univention Management Console</title>

		<section id="changelog:umc:web">
			<title>Univention Management Console web interface</title>
			<itemizedlist>
				<listitem><simpara>
						The general design of the web interface has been improved. Several aspects of the design are borrowed from the Google Material Design guidelines. All Univention web interfaces reside now below <command>/univention</command>, e.g., &ucsUMC; has moved from <command>/univention-management-console</command> to <command>/univention</command> (<u:bug>42261</u:bug>, <u:bug>42228</u:bug>, <u:bug>42264</u:bug>, <u:bug>43451</u:bug>, <u:bug>42266</u:bug>, <u:bug>43528</u:bug>, <u:bug>44007</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
						A central portal site has been added to UCS. It allows to have a central site which shows all installed Apps in a UCS domain. Furthermore, the portal page can be configured and customized
						(<u:bug>42233</u:bug>, <u:bug>42175</u:bug>, <u:bug>42231</u:bug>, <u:bug>43495</u:bug>, <u:bug>43670</u:bug>, <u:bug>43887</u:bug>, <u:bug>43932</u:bug>, <u:bug>43933</u:bug>, <u:bug>42235</u:bug>, <u:bug>43928</u:bug>, <u:bug>44018</u:bug>, <u:bug>44048</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
						A server overview site has been added to UCS. It allows to search for and navigate to particular server instances in the UCS domain (<u:bug>43595</u:bug>, <u:bug>43680</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
						JavaScript and CSS code has been moved from &ucsUMC; into a generic and separate web library that can be used by other web applications, as well (<u:bug>38824</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
						Global menu entries can now be defined via JavaScript hook modules.
						A JavaScript hook module needs to be placed as module in the JavaScript directory <envar>umc/hook</envar> and it needs to be defined via the &ucsUCRV; <envar>umc/web/hooks/&lt;packageName&gt;=&lt;javaScriptModule&gt;</envar> (<u:bug>42263</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
						Improved internationalization for JavaScript files in UMC (<u:bug>42293</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
						The correct service name is shown when the start behavior is configured through the &ucsUCRV; <envar>umc/http/autostart</envar> (<u:bug>42340</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Various security improvements have been done to guard against Cross Site Request Forgery (XSRF), Cross Site Scripting (XSS) and Clickjacking attacks.
					The HTTP response header <property>X-Frame-Options</property>, <property>Content-Security-Policy</property>, <property>X-Content-Type-Options</property>, <property>X-XSS-Protection</property> and <property>X-Permitted-Cross-Domain-Policies</property> are now set by default (<u:bug>39733</u:bug>, <u:bug>39731</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					A menu entry for changing the language has been added (<u:bug>40612</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					A menu entry for downloading the root certificate and certificate revocation list has been added (<u:bug>43695</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					In certain situations it was possible that the translations were mixed. This has been fixed (<u:bug>38370</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Traceback reports do not require an authenticated session anymore and can be sent anonymously (<u:bug>42169</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Plural forms for translations are now supported in the JavaScript code (<u:bug>42220</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The JavaScript libraries <package>dojo</package> (1.12.1), <package>xstyle</package> (3.2.0) and <package>dgrid</package> (1.1.0) have been updated (<u:bug>42291</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
						Data grids now have a dynamic height depending on the number of items in it, instead of a fixed height. (<u:bug>32027</u:bug>, <u:bug>43630</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The design of the login dialog has been restructured and moved into a single login page. By default the login to Univention Management Console now uses the SAML Single Sign On login mechanism.
					The session timeout has been increased to 8 hours of inactivity (<u:bug>42174</u:bug>, <u:bug>43918</u:bug>). 
				</simpara></listitem>
				<listitem><simpara>
					The French translation has been updated w.r.t. the new structure of the web packages (<u:bug>43462</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:server">
			<title>Univention Management Console server</title>
			<itemizedlist>
				<listitem><simpara>
					The correct service name is shown when the start behavior is configured through the &ucsUCRV; <envar>umc/server/autostart</envar> (<u:bug>42339</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					A crash in the UMC server has been fixed which could occur during connecting to module processes under heavy load (<u:bug>43713</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					UMC modules are able to serve requests for unauthenticated client now (<u:bug>42114</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:appcenter">
			<title>Univention App Center</title>
			<itemizedlist>
				<listitem><simpara>
					More characters in the version of an App are allowed
					(<u:bug>41905</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The version comparison for supported UCS Version has been fixed so
					that it does not fail on testing minor versions that are lower than
					the current version (<u:bug>43901</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Adjustments have been made to work with the new Docker version or
					other software components (<u:bug>43338</u:bug>, <u:bug>43607</u:bug>,
					<u:bug>43458</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The status message in the App details Page has been improved and
					shows the installed and candidate version (<u:bug>43905</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The App Center can now install certain Docker Apps from other UCS
					versions (<u:bug>43496</u:bug>, <u:bug>43662</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Code cleanup where deprecated functions of Univention Directory
					Manager were used (<u:bug>43624</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Before UCS 4.2, the Docker init scripts are created as link. Since the new init scripts needs unique identifiers, the
					init scripts are now copied from a default init script. All existing init scripts are migrated during the upgrade to UCS
					4.2 (<u:bug>43674</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					To support <application>systemd</application> based containers, <package>univention-appcenter-docker</package> now
					asks docker to mount <filename class="directory">/run</filename> and <filename class="directory">/run/lock</filename>
					as <literal>tmpfs</literal> in newly created containers and pre-mounts <filename class="directory">/sys/fs/cgroup</filename>.
					Additionally it uses an adjusted <application>seccomp</application> profile, which allows the system call <literal>name_to_handle_at</literal>, which
					avoids granting <literal>SYS_ADMIN</literal> capabilities to containers (<u:bug>43455</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:udmcli">
			<title>&ucsUDM; UMC modules and command line interface</title>
			<itemizedlist>
				<listitem><simpara>
					The existence of objects is now checked before initializing it (<u:bug>38110</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
						The syntax class <function>ObjectFlag</function> now accepts the
						value <literal>docker</literal> (which is used to mark computer
						objects that are created specifically for Docker App Containers);
						the corresponding attribute is now multivalued, making it possible
						to store more than one flag on an object (<u:bug>43148</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The UDM specific JavaScript widget <function>LinkList</function> has been moved to <package>univention-management-console-module-udm</package> from <package>univention-management-console-frontend</package> (<u:bug>42321</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:setup">
			<title>Modules for system settings / setup wizard</title>
			<itemizedlist>
				<listitem><simpara>
					The setup wizard has been refactored to be a standalone web application (<u:bug>42172</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The package <package>dbus-x11</package> is installed by default to silence <package>firefox</package> (<u:bug>36168</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The file <filename>/etc/localtime</filename> no longer is a symbolic link, but contains a copy of the time zone data (<u:bug>24090</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:update">
			<title>Software update module</title>
			<itemizedlist>
				<listitem><simpara>
					Illegal characters don't cause a crash when viewing the logfile anymore (<u:bug>41539</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:join">
			<title>Domain join module</title>
			<itemizedlist>
				<listitem><simpara>
					The "execute pending join scripts" button is now grayed out if no unconfigured join scripts exists (<u:bug>35326</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Illegal characters don't cause a crash when viewing the logfile anymore (<u:bug>41539</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:user">
			<title>Users module</title>
			<itemizedlist>
				<listitem><simpara>
					An alternative tile view has been added to the user list which displays the users' profile pictures (<u:bug>42229</u:bug>, <u:bug>43868</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Templates used when creating new users now work for all properties regardless (<u:bug>43428</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The layout of user templates has been synchronized with the layout of the users modules (<u:bug>42765</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Some broken mappings of user templates have been fixed (<u:bug>29672</u:bug>).

				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:reports">
			<title>Univention Directory Reports</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:computers">
			<title>Computers module</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:dns">
			<title>DNS module</title>
			<itemizedlist>
				<listitem><simpara>
					The help and example for the DNS reverse zone subnet property has been improved  (<u:bug>34131</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The description for the negative time-to-live property has been corrected (<u:bug>33165</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Long descriptions have been added to all DNS module properties (<u:bug>42820</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					DNS names are now checked for validity according to <u:rfc>2181</u:rfc>.
					PTR entries are now shown in forward notation as IP addresses and can be searched for (<u:bug>25354</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:dhcp">
			<title>DHCP module</title>
			<itemizedlist>
				<listitem><simpara>
					The DHCP modules now validate the input fields better and require a valid IP address or host name to be entered (<u:bug>33211</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Long descriptions have been added to all DHCP module properties (<u:bug>42820</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Listing policies for DHCP host entries now works with multiple DHCP services and for entries with none or multiple IP addresses (<u:bug>42849</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Support for dynamic address assignment using pools for known hosts has been improved <u:bug>16923</u:bug>.
				</simpara></listitem>
				<listitem><simpara>
					A memory leak has been fixed.
					A crash during startup if the LDAP server was unreachable has been fixed (<u:bug>31078</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					DHCP options and DHCP statements can now be configured via &ucsUMC; (<u:bug>32557</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The <filename>univention-dhcp</filename> package update script has been adjusted to tolerate temporary
					<application>systemd</application> related service restart failure (<u:bug>43651</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:license">
			<title>License module</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:top">
			<title>Process overview module</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:share">
			<title>Shares module</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:policy">
			<title>Policies</title>
			<itemizedlist>
				<listitem><simpara>
					The long descriptions of the DHCP server statements policy have been corrected (<u:bug>34441</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:printer">
			<title>Printers module</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:mail">
			<title>Mail</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:quota">
			<title>Filesystem quota module</title>
			<itemizedlist>
				<listitem><simpara>
					Clicking on an activated partition opens the quota settings for that partition (<u:bug>43507</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:ucr">
			<title>Univention Configuration Registry module</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:ldap">
			<title>LDAP directory browser</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:other">
			<title>Other modules</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:development">
			<title>Development of modules for &ucsUMC;</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>
	</section>


	<section id="changelog:deployment">
		<title>Software deployment</title>
		<itemizedlist>
			<listitem><simpara>
				The updater scripts <filename>preup.sh</filename> and <filename>postup.sh</filename>
				have been adapted to the needs of UCS 4.2 (<u:bug>42037</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				The pre-check of the UCS 4.2 upgrade now checks if essential server role packages should be removed
				during the upgrade. In this case the upgrade process is stopped previously (<u:bug>39092</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				The pre-check of the UCS 4.2 upgrade now ensures that all computer objects have valid LDAP object classes
				(<u:bug>41868</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				The program <command>univention-updater</command> checks now also the locking status if the option
				<option>--check</option> is used (<u:bug>43625</u:bug>).
			</simpara></listitem>
		</itemizedlist>

		<section id="changelog:deployment:pkgdb">
			<title>Software monitor</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:deployment:cli">
			<title>Software deployment command line tools</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>
	</section>


	<section id="changelog:lib">
		<title>Univention base libraries</title>
		<itemizedlist>
			<listitem><simpara>
				The basic Univention LDAP Python library <wordasword>uldap.py</wordasword> allows now the deletion
				of the following LDAP attributes <property>univentionPortalBackground</property>,
				<property>univentionPortalLogo</property> and <property>univentionPortalEntryIcon</property>
				(<u:bug>44019</u:bug>).
			</simpara></listitem>
		</itemizedlist>
	</section>


	<section id="changelog:service">
		<title>System services</title>

		<section id="changelog:service:saml">
			<title>SAML</title>
			<itemizedlist>
				<listitem><simpara>
					The package <package>python-pysaml2</package> 3.0.0-5 has been ported back from Debian Stretch (<u:bug>43547</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The package <package>simplesamlphp</package> 1.14.11-1 has been ported back from Debian Stretch (<u:bug>43783</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The Apache configuration has been adjusted (<u:bug>43708</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:selfservice">
			<title>Univention self service</title>
			<itemizedlist>
				<listitem><simpara>
					The Self Service now communicates directly with the UMC server instead of being proxied through a WSGI process (<u:bug>42132</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:mail">
			<title>Mail services</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:virus">
			<title>Spam/virus detection and countermeasures</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:print">
			<title>Printing services</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:nagios">
			<title>Nagios</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:kerberos">
			<title>Kerberos</title>
			<itemizedlist>
				<listitem><simpara>
					The missing package conflicts between <package>univention-heimdal-kdc</package> and <package>univention-heimdal-member</package> were added (<u:bug>34258</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The Listener scripts for creating Kerberos keys were fixed to no drop root permissions (<u:bug>43409</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The Listener scripts for creating Kerberos keys were updated to use the new location of <command>ktutil</command> and <command>kadmin</command> (<u:bug>43492</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The list of supported encryption types in <filename>/etc/krb5.conf</filename> has been adjusted to make e.g. <command>nsupdate</command> work with the new Samba version (<u:bug>43850</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:ssl">
			<title>SSL</title>
			<itemizedlist>
				<listitem><simpara>
					During <package>univention-system-setup</package>, the certificate for the initially configured <systemitem class="fqdomainname">undefined-hostname.unassigned-domain</systemitem> is not recreated (<u:bug>43626</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The root SSL certificate used for the UCS domain is now registered as a trusted
					root certificate for all applications using <filename>/etc/ssl/certs/</filename>
					(<u:bug>39179</u:bug>, <u:bug>43811</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:proxy">
			<title>Proxy services</title>
			<itemizedlist>
				<listitem><simpara>
					The Squid proxy server was upgraded to version 3.4.8 and its configuration adapted (<u:bug>43580</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The Squid proxy server now uses STARTTLS to encrypt all LDAP connections (<u:bug>43676</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					For <package>squidguard</package> a fix for the script <filename>update-squidguard</filename> was ported back from the 1.5-5 release (<u:bug>43581</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:systeminfo">
			<title>Univention System Info</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:apache">
			<title>Apache</title>
			<itemizedlist>
				<listitem><simpara>
					Apache configuration files in the packages <package>univention-apache</package>,
					<package>univention-novnc</package>, <package>univention-nagios</package> and
					<package>univention-system-activation</package>
					have been adapted to apache version 2.4 (<u:bug>42196</u:bug>, <u:bug>42296</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The SSL proxy peer checks for <wordasword>CN</wordasword> and for hostname have been disabled since newer Apache
					versions check this by default and the Docker container web interfaces are available via localhost
					(<u:bug>43813</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:pam">
			<title>PAM / Local group cache</title>
			<itemizedlist>
				<listitem><simpara>
					The <package>PAM</package> configuration now uses the <option>user_envfile</option>
					option for reading files from the user home directory (<u:bug>43287</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:other">
			<title>Other services</title>
			<itemizedlist>
				<listitem><simpara>
						<package>univention-tftp</package> has been updated due to a newer <package>syslinux</package> version, this fixes the path to the <filename>pxelinux.0</filename> binary.
				</simpara></listitem>
				<listitem><simpara>
					<package>univention-postgresql</package> has been updated to support the newer <package>postgresql-9.4</package> by adding a new <package>univention-postgresql-9.4</package> and changing <package>univention-postgresql</package> to install that on new installations (<u:bug>43682</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					<package>univention-appcenter</package> has been updated to support the newer <package>univention-postgresql-9.4</package> (<u:bug>43682</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					<package>univention-printquota</package> has been updated to support the newer <package>univention-postgresql-9.4</package> (<u:bug>43682</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					<package>univention-pkgdb</package> has been updated to support the newer <package>univention-postgresql-9.4</package> (<u:bug>43682</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					<package>univention-bacula</package> has been updated to support the newer <package>univention-postgresql-9.4</package> (<u:bug>43682</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>
	</section>


	<section id="changelog:virt">
		<title>Virtualization</title>

		<section id="changelog:virt:uvmm">
			<title>Univention Virtual Machine Manager (UVMM)</title>
			<itemizedlist>
				<listitem><simpara>
					Profiles for UCS 4.2 and Windows Server 2016 have been added (<u:bug>44067</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Error handling has been improved (<u:bug>38634</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The start script for <command>libvirtd</command> has been updates to be compatible with <application>systemd</application> (<u:bug>43493</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					<application>libvirtd</application> is no longer started through <application>runit</application> but through <application>systemd</application> (<u:bug>43875</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					<package>qemu</package>, <package>libvirt</package>, <package>VirtIO</package> and related packages have been updates to newer versions.
					Live-migration and snapshots from previous versions might not work in all cases due to large changes in the code base.
					In such cases it is recommended to cleanly shutdown the virtual machines before the upgrade and to cold-boot the virtual machines after the upgrade (<u:bug>38877</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					<package>univention-novnc</package> was adapted, the start of the service is moved to a later point in the installation. (<u:bug>44067</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:virt:operation">
			<title>Operate UCS as virtual machine</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>
	</section>


	<section id="changelog:container">
		<title>Container Technologies</title>
			<itemizedlist>
				<listitem><simpara>
					Docker has been updated to 1.12 (<u:bug>42282</u:bug>, <u:bug>43449</u:bug>, <u:bug>44006</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The &ucsUCRV; <envar>docker/daemon/default/parameter/.*</envar> has been added to configure additional
					parameter for the Docker daemon (<u:bug>44033</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The parameter <option>live-restore</option> is now used by default (<u:bug>44033</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The Docker daemon is now started through <application>systemd</application> (<u:bug>44033</u:bug>).
				</simpara></listitem>
			</itemizedlist>
	</section>


	<section id="changelog:win">
		<title>Services for Windows</title>
		<section id="changelog:win:samba">
			<title>Samba</title>
			<itemizedlist>
				<listitem><simpara>
					The &ucsUDL; is restarted after the &ucsUCRV; <envar>samba4/role</envar> gets set in the joinscript (<u:bug>43501</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Samba has been updated to version <literal>4.6.1</literal> (<u:bug>40661</u:bug>, <u:bug>42045</u:bug>, <u:bug>43681</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					<package>univention-samba4</package> has been adjusted
					to flush caches during initial install before committing
					the SYSVOL ACLs (<u:bug>41319</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Samba has been adjusted to avoid problems in case
					an administrator created a container <uri>CN=System</uri> somewhere
					(<u:bug>31763</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The <filename>samba4-idmap.py</filename> listener module has been improved to initialize the <wordasword>idmap</wordasword> during module resynchronization
					(<u:bug>42819</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The <filename>samba4-idmap.py</filename> listener module now flushes the samba <wordasword>gencache</wordasword> at the end of <option>--direct-resync</option>
					(<u:bug>41319</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					<package>univention-samba</package> and <package>univention-samba4</package> now use the interfaces defined in &ucsUCR; (<u:bug>43073</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					<command>samba_dnsupdate</command> now avoids adding a <wordasword>_msdcs</wordasword> <wordasword>NS</wordasword> record if the corresponding <wordasword>SOA</wordasword> record is not present (<u:bug>43291</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:win:takeover">
			<title>Univention AD Takeover</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:win:s4c">
			<title>Univention S4 Connector</title>
			<itemizedlist>
				<listitem><simpara>
					The escaping of LDAP filter expressions in the S4 Connector has been improved (<u:bug>32086</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The generation of filters from &ucsUCRV; <envar>connector/s4/mapping/dns/ignorelist</envar> has been fixed (<u:bug>43397</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The S4 Connector can now handle large groups if Samba returns ranged results (<u:bug>41764</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:win:adc">
			<title>Univention Active Directory Connection</title>
			<itemizedlist>
				<listitem><simpara>
				</simpara></listitem>
			</itemizedlist>
		</section>
	</section>


	<section id="changelog:other">
		<title>Other changes</title>
		<itemizedlist>
			<listitem><simpara>
				All packages have been updated to no longer depend on deprecated packages and features (<u:bug>42183</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				<command>ucslint</command> check for missing quoting in function local variable assignments (<u:bug>41926</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				<command>ucslint</command> checks Debian maintainer scripts for wrong comments naming a different maintainer script (<u:bug>32539</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				<command>ucslint</command> warns of dependencies on transitional packages (<u:bug>37203</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				<command>ucslint</command> checks were added to the build process of some packages (<u:bug>23837</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				<command>ucslint</command> skips checking some generated files (<u:bug>43284</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				The service <systemitem class="service">portmap</systemitem> was renamed to <systemitem class="service">rpcbind</systemitem> (<u:bug>36571</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				The init scripts of all services have been made <orgname>Linux Standard Base</orgname> (<acronym>LSB</acronym>) compliant to allow <command>insserv</command> to automatically reorder them based on dependencies (<u:bug>38438</u:bug>).
				The test for <command>insserv</command> has been remove (<u:bug>43306</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				The &ucsUCRV; <envar>version/erratalevel</envar> gets reset to <literal>0</literal> (<u:bug>43300</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				Renaming and moving objects into names containing a comma is now possible (<u:bug>43332</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				The generation of the maintenance script to remove obsolete files form a local repository has been fixed:
				It no longer removes the cryptographic signatures of the updater scripts and <filename class="directory">dists/</filename> directories required for network installation (<u:bug>39582</u:bug>).
				It also uses the correct path to remove obsolete packages (<u:bug>28048</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				<methodname>unbind()</methodname> methods have been added to the classes <classname>univention.uldap</classname> and <classname>univention.admin.uldap</classname> (<u:bug>37519</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				The class <classname>univention.lib.umc_connection.UMCConnection</classname> has been replaced with the new and more flexible class <classname>univention.lib.umc.Client</classname> (<u:bug>34498</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				The following packages have been back-ported and built in order to update to the newer docker version:
				<package>golang</package>, <package>containerd</package>, <package>golang-1.6</package>, <package>runc</package>,
				<package>golang-codegangsta-cli</package>, <package>golang-github-coreos-go-systemd</package>,
				<package>golang-github-docker-go-units</package>, <package>golang-github-opencontainers-specs</package>,
				<package>golang-github-seccomp-libseccomp-golang</package>, <package>golang-github-vishvananda-netlink</package>,
				<package>dh-golang</package>, <package>golang-dbus</package>, <package>golang-github-xeipuuv-gojsonschema</package>,
				<package>golang-testify</package>, <package>golang-github-xeipuuv-gojsonreference</package>,
				<package>golang-github-xeipuuv-gojsonpointer</package>, <package>golang-github-davecgh-go-spew</package>,
				<package>golang-github-pmezard-go-difflib</package>, <package>libseccomp</package>,
				<package>golang-github-vishvananda-netns</package>, <package>golang-objx</package> (<u:bug>42282</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				The following packages have been added to the maintained section of
				the software repository:
				<package>python-cups</package>, <package>univention-mysql</package>,
				<package>recode</package>, <package>freetds</package>, <package>xmlrpc-epi</package>,
				<package>libwebp</package>, <package>uw-imap</package>, <package>firebird2.5</package>
				(<u:bug>42311</u:bug>, <u:bug>42509</u:bug>, <u:bug>43481</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The package <package>xserver-xorg-input-all</package> does no longer depend on <package>xserver-xorg-input-vmmouse</package>
				since it is obsolete with the latest kernel changes (<u:bug>43460</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				The package <package>python-univention-directory-manager-legacy-ucd-tcs</package> has been removed (<u:bug>41637</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				The packages <package>univention-log-collector-server</package> and <package>univention-log-collector-client</package> have been removed from UCS (<u:bug>41638</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				During the upgrade to UCS 4.2, it could happen that a restart of the SpamAssassin daemon failed due to old Perl modules.
				The updated <package>perl</package> package ensures now that the <package>spamassassin</package> package is previously 
				updated (<u:bug>43534</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				Some old packages like <package>emacs23</package> are no longer part of Debian Jessie.
				Dependencies on such old packages have been updated to their replacements (<u:bug>43649</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				Old custom <package>firefox</package> packages have been replaced with the Debian upstream package <package>firefox-esr</package>.
				During the update to &ucsUCS; 4.2-0 the old package are automatically replaced (<u:bug>42322</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				The time service (TCP port 37) has been disabled and the corresponding UCR variables for the firewall accept rule are not set by default any longer.
				During update, the UCR variables for the firewall accept rule are unset (<u:bug>42109</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				<package>univention-join</package> now uses <acronym>SNTP</acronym> for initial time sync (<u:bug>43987</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				<package>univention-firewall</package> has been adapted to new iptables rules created by the upgraded docker service (<u:bug>43707</u:bug>).
			</simpara></listitem>
		</itemizedlist>
	</section>
</chapter>
<!-- vim: set ts=4 sw=4 noet: -->
