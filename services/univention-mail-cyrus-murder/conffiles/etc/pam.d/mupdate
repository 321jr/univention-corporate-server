# Warning: This file is auto-generated and might be overwritten by 
#          univention-config-registry.
#          Please edit the following file instead:
# Warnung: Diese Datei wurde automatisch generiert und kann durch 
#          univention-config-registry Ã¼berschrieben werden. 
#          Bitte bearbeiten Sie an Stelle dessen die folgende Datei:
# 
# 	/etc/univention/templates/files/etc/pam.d/mupdate
# 

# PAM configuration file for Cyrus Murder mupdate service
# $Id: mupdate.pam 5 2005-03-12 23:19:45Z sven $
#
# If you want to use Cyrus in a setup where users don't have
# accounts on the local machine, you'll need to make sure
# you use something like pam_permit for account checking.
#
# Remember that SASL (and therefore Cyrus) accesses PAM 
# modules through saslauthd, and that SASL can only deal with
# plaintext passwords if PAM is used.
#

### Authentication Section
#
# remote authentification; if a service
# - fails, we'll fall back to cache authentification
# - is successful, cache the password
# - isn't aware of the user, proceed with the next service

# turn email addresses into cn

auth	optional     pam_univentionmailcyrus.so ldap_host=master.site.tld ldap_base=dc=site,dc=tld from_attr=mailPrimaryAddress to_attr=cn

# auth     [success=done new_authtok_reqd=ok          user_unknown=ignore          service_err=die authinfo_unavail=die          default=ignore]                         pam_krb5.so use_first_pass

auth    [success=done new_authtok_reqd=ok          user_unknown=die          service_err=die authinfo_unavail=die          default=die]              pam_ldap.so use_first_pass config=/etc/imapd/pam_ldap_mupdate.conf

### Account Section
#
# remote authentification; if a service
# - fails, we'll fall back to cache authentification
# - is successful, cache the password
# - isn't aware of the user, proceed with the next service

# account  sufficient                         pam_krb5.so

account  required     pam_ldap.so config=/etc/imapd/pam_ldap_mupdate.conf

