@!@
myfqdn = '.'.join([ baseConfig['hostname'], baseConfig['domainname'] ])
if baseConfig.has_key('mail/cyrus/murder/backend/hostname') and baseConfig['mail/cyrus/murder/backend/hostname'] != '':
	backend_hostname = baseConfig['mail/cyrus/murder/backend/hostname']
else:
	backend_hostname = myfqdn

if baseConfig.has_key('mail/cyrus/murder/master') and baseConfig['mail/cyrus/murder/master'] != '':
	if baseConfig['mail/cyrus/murder/master'] == myfqdn:
		print'''
	# --- Mupdate master ---------------------------
	recover		cmd="/usr/sbin/ctl_cyrusdb -r -C /etc/imapd/master.conf"'''

	if baseConfig.has_key('mail/cyrus/murder/backends') and backend_hostname in baseConfig['mail/cyrus/murder/backends'].split(' '):
		print'''
	# --- Cyrus Murder backend -------------------------

	# this is useful on backend nodes of a Murder cluster
	# it causes the backend to syncronize its mailbox list with
	# the mupdate master upon startup
 	mupdatepush   cmd="/usr/sbin/ctl_mboxlist -m -C /etc/imapd/imapd.conf"'''

	if baseConfig.has_key('mail/cyrus/murder/frontends') and myfqdn in baseConfig['mail/cyrus/murder/frontends'].split(' '):
		print''' 
	# --- Murder frontends -------------------------
	recover		cmd="/usr/sbin/ctl_cyrusdb -r -C /etc/imapd/frontend.conf"
  
	# this is recommended if caching TLS sessions
	tlsprune	cmd="/usr/sbin/tls_prune -C /etc/imapd/frontend.conf"'''
@!@
