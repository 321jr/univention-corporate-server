# Warning: This file is auto-generated and might be overwritten by
#          univention-config-registry.
#          Please edit the following file instead:
# Warnung: Diese Datei wurde automatisch generiert und kann durch
#          univention-config-registry <FC>berschrieben werden.
#          Bitte bearbeiten Sie an Stelle dessen die folgende Datei:
#
#       /etc/univention/templates/files/etc/hylafax/modem.conf
#
# Sample Config with comments can be found in /usr/share/doc/capi4hylafax/examples/config.faxCAPI.gz
#

SpoolDir:               /var/spool/hylafax
FaxRcvdCmd:             /var/spool/hylafax/bin/faxrcvd
PollRcvdCmd:             /var/spool/hylafax/bin/pollrcvd
FaxReceiveUser:         uucp
LogFile:                /var/log/hylafax/capi4hylafax
LogTraceLevel:          4
LogFileMode:            0600

@!@
import os
for file in os.listdir('/etc/hylafax'):
	if file.startswith('config.'):
		os.unlink(os.path.join('/etc/hylafax',file))
i=0
while baseConfig.has_key("fax/modem%d/name"%i) and baseConfig.has_key("fax/modem%d/out/msn"%i) and baseConfig.has_key("fax/modem%d/in/msn"%i):

	os.symlink('/etc/hylafax/modem.conf', os.path.join('/etc/hylafax', 'config.%s' %baseConfig['fax/modem%d/name' % i]))

	print '{'
	print '    HylafaxDeviceName:\t\t\"%s\"'%baseConfig["fax/modem%d/name"%i]	#required
	print '    RecvFileMode:\t\t0600'
	if baseConfig.has_key("fax/modem%d/head/number"%i):
		print '    FAXNumber:\t\t"%s"'%baseConfig["fax/modem%d/head/number"%i]
	
	if baseConfig.has_key("fax/modem%d/head/sender"%i):
		print '    LocalIdentifier:\t\t"%s"'%baseConfig["fax/modem%d/head/sender"%i]
	
	print '    MaxConcurrentRecvs:\t\t2'
	if baseConfig.has_key("fax/modem%d/out/controller"%i):			#required, default set to 1
		print '    OutgoingController:\t\t%s'%baseConfig["fax/modem%d/out/controller"%i]
	else:
		print '    OutgoingController:\t\t1'
	
	print '    OutgoingMSN:\t\t"%s"'%baseConfig["fax/modem%d/out/msn"%i]	#required
	print '    SuppressMSN:\t\t1'
	if baseConfig.has_key("fax/modem%d/prefix"%i):
		print '    NumberPrefix:\t\t%s'%baseConfig["fax/modem%d/prefix"%i]
	
	print '    UseISDNFaxService:\t\t0'
	print '    RingingDuration:\t\t30'
	print '    # ----------- incoming params -----------'
	print '    {'
	if baseConfig.has_key("fax/modem%d/in/controller"%i):
		print '\tController:\t\t%s'%baseConfig["fax/modem%d/in/controller"%i]	#required, default set to "fax/modem%d/out/controller"
	else:
		print '\tController:\t\t1'
	
	print '\tAcceptSpeech:\t\t1'
	print '\tUseDDI:\t\t0'
	print '\tDDIOffset:\t\t"12345"'
	print '\tDDILength:\t\t3'
	print '\tIncomingDDIs:\t\t'
	if baseConfig['fax/modem%d/in/msn'%i] != "none":
		print '\tIncomingMSNs:\t\t%s'%baseConfig["fax/modem%d/in/msn"%i]	#required
	if baseConfig['fax/modem%d/in/msn'%i] != "none":
		print '\tAcceptGlobalCall:\t\t0'
	else:
		print '\tAcceptGlobalCall:\t\t1'
	print '    }'
	print '}'
	i=i+1
@!@

