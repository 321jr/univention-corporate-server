--- a/horde-webmail/lib/Horde/Registry.php	2008-11-03 11:28:20.000000000 +0100
+++ b/horde-webmail/lib/Horde/Registry.php	2008-11-03 11:32:43.000000000 +0100
@@ -1080,11 +1080,11 @@
         if (isset($GLOBALS['prefs']) &&
             ($theme = $GLOBALS['prefs']->getValue('theme'))) {
             if (!isset($this->_themeCache[$theme][$app])) {
-                $this->_themeCache[$theme][$app] = file_exists($this->get('themesfs', $app) . '/' . $theme . '/themed_graphics');
+                $this->_themeCache[$theme][$app] = file_exists($this->get('themesfs', $app) . '/' . basename ($theme) . '/themed_graphics');
                 $this->_cacheVars(array('_themeCache'));
             }
 
             if ($this->_themeCache[$theme][$app]) {
-                $this->_imgDir[$app] = $this->get('themesuri', $app) . '/' . $theme . '/graphics';
+                $this->_imgDir[$app] = $this->get('themesuri', $app) . '/' . basename ($theme) . '/graphics';
             }
         }
