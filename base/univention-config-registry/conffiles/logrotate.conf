# Warning: This file is auto-generated and might be overwritten by
#          univention-config-registry.
#          Please edit the following file instead:
# Warnung: Diese Datei wurde automatisch generiert und kann durch
#          univention-config-registry Ã¼berschrieben werden.
#          Bitte bearbeiten Sie an Stelle dessen die folgende Datei:
#
#       /etc/univention/templates/files/etc/logrotate.conf
#

# see "man logrotate" for details
# rotate log files weekly
weekly

# keep some weeks worth of backlogs
rotate @%@log/rotate/weeks@%@

# create new (empty) log files after rotating old ones
create

# uncomment this if you want your log files compressed
#compress

# packages drop log rotation information into this directory
include /etc/logrotate.d

/var/log/univention/*.log {
	weekly
	missingok
	rotate @%@log/rotate/weeks@%@
	create 640 root adm
	lastaction
		test -x /usr/sbin/univention-set-logfile-permissions && /usr/sbin/univention-set-logfile-permissions || true
		test -x /usr/bin/sv && test -e /etc/runit/univention/univention-directory-listener && sv term univention-directory-listener || true
		test -x /usr/bin/sv && test -e /etc/runit/univention/univention-directory-notifier && sv term univention-directory-notifier || true
		test -x /usr/bin/sv && test -e /etc/runit/univention/univention-dhcp && sv term univention-dhcp || true
		test -x /usr/bin/sv && test -e /etc/runit/univention/univention-bind && sv term univention-bind || true
		test -x /usr/bin/sv && test -e /etc/runit/univention/univention-bind-proxy && sv term univention-bind-proxy || true
	endscript
}
