#Warning: This file is auto-generated and might be overwritten by
#          univention-config-registry.
#          Please edit the following file instead:
# Warnung: Diese Datei wurde automatisch generiert und kann durch
#          univention-config-registry Ã¼berschrieben werden.
#          Bitte bearbeiten Sie an Stelle dessen die folgende Datei:
#
#   /etc/univention/templates/files/etc/default/ntpdate
#

@!@
servers=''
if not (configRegistry.has_key('timeserver') and configRegistry['timeserver'] == 'local'):
	if configRegistry.has_key('server/role') and configRegistry['server/role'] != "domaincontroller_master":
		if configRegistry.has_key('ldap/master') and configRegistry['ldap/master']:
			servers+=configRegistry['ldap/master']
		if configRegistry.has_key('ldap/backup') and configRegistry['ldap/backup']:
			fqdn=configRegistry['hostname']+'.'+configRegistry['domainname']
			backup=configRegistry['ldap/backup'].split(' ')
			for i in range(0,len(backup)):
				if backup[i] != fqdn:
					servers+=' '+backup[i]
	if configRegistry.has_key('timeserver') and configRegistry['timeserver']:
		servers+=' '+configRegistry['timeserver']
	if configRegistry.has_key('timeserver2') and configRegistry['timeserver2']:
		servers+=' '+configRegistry['timeserver2']
	if configRegistry.has_key('timeserver3') and configRegistry['timeserver3']:
		servers+=' '+configRegistry['timeserver3']
if servers:
	print 'NTPSERVERS="%s"' % servers
@!@
