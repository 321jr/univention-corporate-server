@!@
def print_proxy(proxy):
	print 'Acquire'
	print '{'
	print '    http'
	print '    {'
	proxyString='Proxy "http://'
	if configRegistry['proxy/username'] and configRegistry['proxy/password']:
		proxyString+='%s:%s\x40' % (configRegistry['proxy/username'],configRegistry['proxy/password'])
	proxyString+='%s"' % proxy
	print '        %s;' % (proxyString)
	print '    }'
	print '}'

if configRegistry.has_key('proxy/http') and configRegistry['proxy/http']:
	print_proxy(configRegistry['proxy/http'].lower().replace('http://',''))
elif configRegistry['proxy/address']:
	proxy='%s' % (configRegistry['proxy/address'])
	if configRegistry['proxy/port']:
		proxy+=':%s' % (configRegistry['proxy/port'])
	print_proxy(proxy)
@!@
