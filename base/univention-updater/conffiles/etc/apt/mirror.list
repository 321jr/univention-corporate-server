@%@BCWARNING=#@%@

set base_path    @%@repository/mirror/basepath@%@
# set mirror_path  $base_path/mirror
# set skel_path    $base_path/skel
# set var_path     $base_path/var
# set defaultarch  <running host architecture>
set nthreads     @%@repository/mirror/threads@%@

@!@
from univention.management.console.handlers.update.mirror import UniventionMirror
from univention.management.console.handlers.update.tools import UCS_Version

try:
	mirror = UniventionMirror()
	start = configRegistry.get( 'repository/mirror/version/start', None )
	end = configRegistry.get( 'repository/mirror/version/end', None )
	if start:
		start = UCS_Version( start )
	if end:
		end = UCS_Version( end )
	print mirror.print_version_repositories( clean = True, dists = True, start = start, end = end )
	print mirror.print_security_repositories( clean = True, start = start, end = end, all_security_updates = True )
	print mirror.print_component_repositories( clean = True )
except:
	print '# An error occurred during the repository check. The error message:'
	print '#   %s: %s' % sys.exc_info()[:2]
	print '#'
	print ''
	print '# After fixing this issue, you should rewrite this file with the following command:'
	print '#   univention-config-registry commit /etc/apt/mirror.list'
	print '#'
	print ''
@!@
