# Warning: This file is auto-generated and might be overwritten by
#          univention-baseconfig.
#          Please edit the following file instead:
# Warnung: Diese Datei wurde automatisch generiert und kann durch
#          univention-baseconfig überschrieben werden.
#          Bitte bearbeiten Sie an Stelle dessen die folgende Datei:
#
# 	/etc/univention/templates/files/etc/krb5.conf
#


[libdefaults]
@!@
if baseConfig.has_key('kerberos/realm'):
	print '\tdefault_realm = %s' % baseConfig['kerberos/realm']
@!@
# The following krb5.conf variables are only for MIT Kerberos.
	default_tgs_enctypes = des3-hmac-sha1 arcfour-hmac-md5 des-cbc-crc des-cbc-md5
	default_tkt_enctypes = des3-hmac-sha1 arcfour-hmac-md5 des-cbc-crc des-cbc-md5
	permitted_enctypes = des3-hmac-sha1 arcfour-hmac-md5 des-cbc-crc des-cbc-md5
	kdc_timesync = 1
	ccache_type = 4
	forwardable = true
	proxiable = true
	use_authtok = true
@!@
if baseConfig.has_key('kerberos/v4tickets') and baseConfig['kerberos/v4tickets'] == 'yes':
	print '\tkrb4_get_tickets=yes'
else:
	print '\tkrb4_get_tickets=no'
@!@
#	debug = true

@!@
if baseConfig.has_key('kerberos/realm'):
	print '[realms]'
	print '%s = { ' % baseConfig['kerberos/realm']
	print '\tacl_file = /var/lib/heimdal-kdc/kadmind.acl'
	if not baseConfig.has_key('kerberos/kdc'):
		if baseConfig.has_key('ldap/server/name') and baseConfig['ldap/server/name']:
			kdc=baseConfig['ldap/server/name']
			kdc+=" "
		if baseConfig.has_key('ldap/server/addition') and baseConfig['ldap/server/addition']:
			kdc+=baseConfig['ldap/server/addition'].replace('"','')
		if kdc:
			print '\tkdc = %s' % kdc
	else:
		print '\tkdc = %s' % baseConfig['kerberos/kdc']
	if baseConfig.has_key('kerberos/adminserver'):
		print '\tadmin_server = %s' % baseConfig['kerberos/adminserver']
	print '}'
@!@
	

[kdc]
database = {
	acl_file = /var/lib/heimdal-kdc/kadmind.acl
	dbname = ldap:@%@ldap/base@%@
	hdb-ldap-create-base = cn=kerberos,@%@ldap/base@%@

	log_file = /var/log/heimdal-database.log
	mkey_file = /var/heimdal/m-key
}
