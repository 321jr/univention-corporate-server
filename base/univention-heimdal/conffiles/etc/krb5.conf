# Warning: This file is auto-generated and might be overwritten by
#          univention-config-registry.
#          Please edit the following file instead:
# Warnung: Diese Datei wurde automatisch generiert und kann durch
#          univention-config-registry Ã¼berschrieben werden.
#          Bitte bearbeiten Sie an Stelle dessen die folgende Datei:
#
# 	/etc/univention/templates/files/etc/krb5.conf
#


[libdefaults]
@!@
if baseConfig.has_key('kerberos/realm'):
	print '\tdefault_realm = %s' % baseConfig['kerberos/realm']
@!@
	default_tgs_enctypes = des-cbc-crc des-cbc-md4 des-cbc-md5 des3-cbc-sha1 arcfour-hmac-md5 aes128-cts-hmac-sha1-96 aes256-cts-hmac-sha1-96
	default_tkt_enctypes = des-cbc-crc des-cbc-md4 des-cbc-md5 des3-cbc-sha1 arcfour-hmac-md5 aes128-cts-hmac-sha1-96 aes256-cts-hmac-sha1-96
	permitted_enctypes = des-cbc-crc des-cbc-md4 des-cbc-md5 des3-cbc-sha1 arcfour-hmac-md5 aes128-cts-hmac-sha1-96 aes256-cts-hmac-sha1-96
	kdc_timesync = 1
	forwardable = true
	proxiable = true
#	debug = true

@!@
if baseConfig.has_key('kerberos/realm'):
	print '[realms]'
	print '%s = { ' % baseConfig['kerberos/realm']
	print '\tacl_file = /var/lib/heimdal-kdc/kadmind.acl'
	if not baseConfig.has_key('kerberos/kdc'):
		if baseConfig.has_key('ldap/server/name') and baseConfig['ldap/server/name']:
			kdc=baseConfig['ldap/server/name']
			kdc+=" "
		if baseConfig.has_key('ldap/server/addition') and baseConfig['ldap/server/addition']:
			kdc+=baseConfig['ldap/server/addition'].replace('"','')
		if kdc:
			print '\tkdc = %s' % kdc
	else:
		print '\tkdc = %s' % baseConfig['kerberos/kdc']
	if baseConfig.has_key('kerberos/adminserver'):
		print '\tadmin_server = %s' % baseConfig['kerberos/adminserver']
	print '}'
@!@
	

[kdc]
hdb-ldap-create-base = cn=kerberos,@%@ldap/base@%@

database = {
	acl_file = /var/lib/heimdal-kdc/kadmind.acl
	dbname = ldap:@%@ldap/base@%@

	log_file = /var/log/heimdal-database.log
	mkey_file = /var/heimdal/m-key
}
