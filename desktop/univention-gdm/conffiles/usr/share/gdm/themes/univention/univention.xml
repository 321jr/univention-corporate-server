<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright (C) 2004, 2005, 2006 Univention GmbH -->
<!DOCTYPE greeter SYSTEM "greeter.dtd">
<greeter>
@!@
availableres = ['640x480','800x600','1024x768','1280x1024','1600x1200']

if baseConfig.has_key('xorg/resolution') and baseConfig['xorg/resolution'] in availableres:
	resolution = baseConfig['xorg/resolution']
	print '\t<item type="pixmap">'
	print '\t\t<normal file="' + resolution + '_start_1.jpg"/>'
	print '\t\t<pos x="0" y="0" width="100%" height="100%"/>'
	print '\t</item>'
else:
	resolution = False
	print '\t<item type="pixmap">'
	print '\t\t<normal file="1600x1200_start_1.jpg"/>'
	print '\t\t<pos x="0" y="0" width="100%" height="100%"/>'
	print '</item>'

xresolution=baseConfig.get('xorg/resolution', '1600x1200').split('x')[0]
yresolution=baseConfig.get('xorg/resolution', '1600x1200').split('x')[1]
if int(xresolution) < 1024:
	font='monospace 12'
else:
	font='monospace 12 bold'
if int(xresolution) == 640:
	left_space=310
elif int(xresolution) == 800:
	left_space=386
elif int(xresolution) == 1024:
	left_space=490
elif int(xresolution) == '1280':
	left_space=630
elif int(xresolution) == '1600':
	left_space=785
else:
	# 1600/785 = 2.038
	left_space=int(xresolution)/float(2.038)

left_space-=5 #5 pixel padding
if int(yresolution) == 480:
	space_white_bar=190
elif int(yresolution) == 600:
	space_white_bar=250
else:
	space_white_bar=290

print '\t<item type="rect">'
print '\t\t<normal color="#FFFFFF" alpha="1.0"/>'
print '\t\t<pos anchor="nw" x="0" y="%d" width="100%%" height="100"/>' % (int(yresolution)-space_white_bar)
print '\t</item>'
print '\t<item type="rect" id="caps-lock-warning">'
print '\t\t<normal color="#FFFFFF" alpha="0.5"/>'
print '\t\t<pos anchor="nw" x="%d" y="%d" width="box" height="box"/>' % (left_space, (int(yresolution)-space_white_bar+70))
print '\t\t<box orientation="vertical" xpadding="5" ypadding="5" spacing="0">'
print '\t\t\t<item type="label">'
print '\t\t\t\t<normal color="#000000" font="%s"/>' % font
print '\t\t\t\t<pos x="50%" anchor="n"/>'
print '\t\t\t\t<stock type="caps-lock-warning"/>'
print '\t\t\t</item>'
print '\t\t</box>'
print '\t</item>'
print ''
print '\t<item type="rect">'
print '\t\t<pos anchor="nw" x="%d" y="%d" width="box" height="box"/>' % (left_space, (int(yresolution)-space_white_bar+5))
print '\t\t<box orientation="vertical" width="200" xpadding="5" ypadding="5" spacing="5">'
print '\t\t\t<item type="label" id="pam-prompt">'
print '\t\t\t\t<pos anchor="nw" width="200"/>'
print '\t\t\t\t<normal color="#000000" font="%s"/>' % font
print '\t\t\t\t<!-- Stock label for: Username: -->'
print '\t\t\t\t<stock type="username-label"/>'
print '\t\t\t</item>'
print '\t\t\t<item type="rect">'
print '\t\t\t\t<normal color="#000000"/>'
print '\t\t\t\t<pos anchor="nw" height="34" width="200"/>'
print '\t\t\t\t<normal color="#000000" font="%s"/>' % font
print '\t\t\t\t<fixed>'
print '\t\t\t\t\t<item type="entry" id="user-pw-entry">'
print '\t\t\t\t\t\t<normal color="#000000" font="%s"/>' % font.replace(' bold', '')
print '\t\t\t\t\t\t<pos anchor="nw" x="1" y="1" height="-2" width="-2"/>'
print '\t\t\t\t\t</item>'
print '\t\t\t\t</fixed>'
print '\t\t\t</item>'
print '\t\t</box>'
print '\t</item>'
print '\t<item type="rect">'
print '\t\t<pos anchor="nw" x="%d" y="%d" width="box" height="box"/>' % ((left_space+5), (int(yresolution)-space_white_bar+110))
print '\t\t<box orientation="vertical" min-width="350" >'
print '\t\t\t<item type="label" id="pam-error">'
print '\t\t\t\t<normal color="#FFFFFF" font="%s"/>' % font
print '\t\t\t\t<text></text>'
print '\t\t\t</item>'
print '\t\t</box>'
print '\t</item>'
print ''
print '\t<item type="rect" id="session_button" button="true">'
if baseConfig.has_key('gdm/menu/language') and baseConfig['gdm/menu/language'] == 'true' and baseConfig.has_key('gdm/menu/system') and baseConfig['gdm/menu/system'] == 'true':
	print '\t\t<pos anchor="nw" x="90%%" y="%s" width="100%%" height="1"/>' % ((int(yresolution)-space_white_bar+10))
elif (not baseConfig.has_key('gdm/menu/language') or  baseConfig['gdm/menu/language'] != 'true') and (not baseConfig.has_key('gdm/menu/system') or baseConfig['gdm/menu/system'] != 'true'):
	print '\t\t<pos x="90%%" y="%s" width="100%%" height="1"/>' % ((int(yresolution)-space_white_bar+70))
else:
	print '\t\t<pos x="90%%" y="%s" width="100%%" height="1"/>' % ((int(yresolution)-space_white_bar+30))
print '\t\t<box orientation="horizontal" spacing="10" xpadding="10">'
print '\t\t\t<item type="label">'
print '\t\t\t\t<normal color="#000000" font="%s"/>' % font
print '\t\t\t\t<prelight color="#dd1144" font="%s"/>' % font
print '\t\t\t\t<active color="#cc0033" font="%s"/>' % font
print '\t\t\t\t<pos y="50%" anchor="w"/>'
print "\t\t\t\t<!-- Stock label for: _Session -->"
print '\t\t\t\t<stock type="session"/>'
print '\t\t\t</item>'
print ''
print '\tt</box>'
print '\t</item>'
print '		'
if baseConfig.has_key('gdm/menu/language') and baseConfig['gdm/menu/language'] == 'true':
 	print '\t<item type="rect" id="language_button" button="true">'
	if not baseConfig.has_key('gdm/menu/system') or  baseConfig['gdm/menu/system'] != 'true':
		print '\t\t<pos x="90%%" y="%s" width="100%%" height="1"/>' % ((int(yresolution)-space_white_bar+70))
	else:
		print '\t\t<pos x="90%%" y="%s" width="100%%" height="1"/>' % ((int(yresolution)-space_white_bar+30))
 	print '\t\t <box orientation="horizontal" spacing="10" xpadding="10">'
 	print '\t\t\t<item type="label">'
 	print '\t\t\t\t<normal color="#000000" font="%s"/>' % font
 	print '\t\t\t\t<prelight color="#dd1144" font="%s"/>' % font
 	print '\t\t\t\t<active color="#cc0033" font="%s"/>' % font
 	print '\t\t\t\t<pos y="50%" anchor="w"/>'
 	print '\t\t\t\t<!-- Stock label for: _Language -->'
 	print '\t\t\t\t<stock type="language"/>'
 	print '\t\t\t</item>'
  	print '\t\t</box>'
  	print '\t</item>'

if baseConfig.has_key('gdm/menu/system') and baseConfig['gdm/menu/system'] == 'true':
	print '\t<item type="rect" id="system_button" button="true">'
	print '\t\t<pos anchor="nw" x="90%%" y="%s" width="100%%" height="1" ypadding="5" />' % ((int(yresolution)-space_white_bar+70))
	print '\t\t<box orientation="horizontal" spacing="10" xpadding="10">'

	print '\t\t\t<item type="label">'
	print '\t\t\t\t<normal color="#000000" font="%s"/>' % font
	print '\t\t\t\t<prelight color="#dd1144" font="%s"/>' % font
	print '\t\t\t\t<active color="#cc0033" font="%s"/>' % font
	print '\t\t\t\t<pos y="50%" anchor="w"/>'
	print '\t\t\t\t<!-- Stock label for: _System -->'
	print '\t\t\t\t<stock type="system"/>'
	print '\t\t\t</item>'

	print '\t\t</box>'
	print '\t</item>'
@!@

</greeter>


