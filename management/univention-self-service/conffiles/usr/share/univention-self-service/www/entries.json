@!@
import json

subpages = ['password_change', 'password_forgotten', 'protect_account_access']
subpage_variable_path = "umc/self-service/passwordservice/subpage/{}"
filtered_subpages = [page for page in subpages if configRegistry.is_true(subpage_variable_path.format(page))]


password_qualities = [
	'credit/digits',
	'credit/lower',
	'credit/upper',
	'credit/other',
	'forbidden/chars',
	'required/chars'
]
quality_variable_path = "password/quality/{}"
filtered_password_qualities = []
for quality in password_qualities:
	ucr_variable = quality_variable_path.format(quality)
	value = configRegistry.get(ucr_variable);
	if value:
		filtered_password_qualities.append({
			'name': quality,
			'value': value
		})


print json.dumps({
	"subpages": filtered_subpages,
	"password_quality": filtered_password_qualities
})
@!@
